var NanoUtility=function(){var a={};return{init:function(){var e=$("body");a=e.data("urlParameters")},generateHref:function(e){var t="?";for(var n in a)a.hasOwnProperty(n)&&("?"!==t&&(t+=";"),t+=n+"="+a[n]);for(var n in e)e.hasOwnProperty(n)&&("?"!==t&&(t+=";"),t+=n+"="+e[n]);return t},winset:function(e,t,n){var a,r;return null==n&&(n=NanoStateManager.getData().config.window.ref),(a={})[n+"."+e]=t,r=a,location.href=NanoUtility.href("winset",r)},extend:function(n,a){return Object.keys(a).forEach(function(e){var t;return(t=a[e])&&"[object Object]"===Object.prototype.toString.call(t)?(n[e]=n[e]||{},NanoUtility.extend(n[e],t)):n[e]=t}),n},href:function(e,t){return null==e&&(e=""),null==t&&(t={}),e=new Url("byond://"+e),NanoUtility.extend(e.query,t),e},close:function(){var e;return e={command:"nanoclose "+a.src},this.winset("is-visible","false"),location.href=NanoUtility.href("winset",e)}}}();"undefined"==typeof jQuery&&reportError("ERROR: Javascript library failed to load!"),"undefined"==typeof doT&&reportError("ERROR: Template engine failed to load!");var reportError=function(e){window.location="byond://?nano_err="+encodeURIComponent(e),alert(e)};$(document).ready(function(){NanoUtility.init(),NanoStateManager.init(),NanoTemplate.init(),NanoWindow.init()}),Array.prototype.indexOf||(Array.prototype.indexOf=function(e){var t=this.length,n=Number(arguments[1])||0;for((n=n<0?Math.ceil(n):Math.floor(n))<0&&(n+=t);n<t;n++)if(n in this&&this[n]===e)return n;return-1}),String.prototype.format||(String.prototype.format=function(n){return this.replace(String.prototype.format.regex,function(e){var t=parseInt(e.substring(1,e.length-1));return 0<=t?n[t]:-1===t?"{":-2===t?"}":""})},String.prototype.format.regex=new RegExp("{-?[0-9]+}","g")),Object.size=function(e){var t=0;for(var n in e)e.hasOwnProperty(n)&&t++;return t},window.console||(window.console={log:function(e){return!1}}),String.prototype.toTitleCase=function(){var r=/^(a|an|and|as|at|but|by|en|for|if|in|of|on|or|the|to|vs?\.?|via)$/i;return this.replace(/([^\W_]+[^\s-]*) */g,function(e,t,n,a){return 0<n&&n+t.length!==a.length&&-1<t.search(r)&&":"!==a.charAt(n-2)&&a.charAt(n-1).search(/[^\s-]/)<0?e.toLowerCase():-1<t.substr(1).search(/[A-Z]|\../)?e:e.charAt(0).toUpperCase()+e.substr(1)})},$.ajaxSetup({cache:!1}),Function.prototype.inheritsFrom=function(e){return this.prototype=new e,(this.prototype.constructor=this).prototype.parent=e.prototype,this},String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),String.prototype.ckey||(String.prototype.ckey=function(){return this.replace(/\W/g,"").toLowerCase()}),NanoStateManager=function(){var n=!1,a=null,r={},o={},i={},s=null,l=function(e){null!=s&&(!1!==(e=s.onBeforeUpdate(e))?(a=e,s.onUpdate(a),s.onAfterUpdate(a)):reportError("data is false, return"))},t=function(e,t){for(var n in e)e.hasOwnProperty(n)&&jQuery.isFunction(e[n])&&(t=e[n].call(this,t));return t};return{init:function(){!function(){null!=(a=$("body").data("initialData"))&&a.hasOwnProperty("config")&&a.hasOwnProperty("data")||reportError("Error: Initial data did not load correctly."+JSON.stringify(a));var e="default";a.config.hasOwnProperty("stateKey")&&a.config.stateKey&&(e=a.config.stateKey.toLowerCase()),NanoStateManager.setCurrentState(e),$(document).on("templatesLoaded",function(){l(a),n=!0})}()},receiveUpdateData:function(e){!function(e){var t;try{t=jQuery.parseJSON(e)}catch(e){return reportError("recieveUpdateData failed. <br>Error name: "+e.name+"<br>Error Message: "+e.message)}t.hasOwnProperty("data")||(a&&a.hasOwnProperty("data")?t.data=a.data:t.data={}),n?l(t):a=t}(e)},addBeforeUpdateCallback:function(e,t){r[e]=t},addBeforeUpdateCallbacks:function(e){for(var t in e)e.hasOwnProperty(t)&&NanoStateManager.addBeforeUpdateCallback(t,e[t])},removeBeforeUpdateCallback:function(e){r.hasOwnProperty(e)&&delete r[e]},executeBeforeUpdateCallbacks:function(e){return t(r,e)},addAfterUpdateCallback:function(e,t){o[e]=t},addAfterUpdateCallbacks:function(e){for(var t in e)e.hasOwnProperty(t)&&NanoStateManager.addAfterUpdateCallback(t,e[t])},removeAfterUpdateCallback:function(e){o.hasOwnProperty(e)&&delete o[e]},executeAfterUpdateCallbacks:function(e){return t(o,e)},addState:function(e){e instanceof NanoStateClass?e.key?i[e.key]=e:reportError("ERROR: Attempted to add a state with an invalid stateKey"):reportError("ERROR: Attempted to add a state which is not instanceof NanoStateClass")},setCurrentState:function(e){if(void 0===e||!e)return reportError("ERROR: No state key was passed!"),!1;if(!i.hasOwnProperty(e))return reportError("ERROR: Attempted to set a current state which does not exist: "+e),!1;var t=s;return s=i[e],null!=t&&t.onRemove(s),s.onAdd(t),!0},getCurrentState:function(){return s},getData:function(){return a}}}(),NanoBaseCallbacks=function(){var a=!0,t={},n={status:function(n){var e;return 2==n.config.status?(e="good",$(".linkActive").removeClass("inactive")):(e=1==n.config.status?"average":"bad",$(".linkActive").addClass("inactive")),$(".statusicon").removeClass("good bad average").addClass(e),$(".linkActive").stopTime("linkPending"),$(".linkActive").removeClass("linkPending"),$(".linkActive").off("click").on("click",function(e){e.preventDefault();var t=$(this).data("href");null!=t&&a&&(a=!1,$("body").oneTime(300,"enableClick",function(){a=!0}),2==n.config.status&&$(this).oneTime(300,"linkPending",function(){$(this).addClass("linkPending")}),window.location.href=t)}),n},nanomap:function(e){return $(".mapIcon").off("mouseenter mouseleave").on("mouseenter",function(e){$("#uiMapTooltip").html($(this).children(".tooltip").html()).show().stopTime().oneTime(5e3,"hideTooltip",function(){$(this).fadeOut(500)})}),$(".zoomLink").off("click").on("click",function(e){e.preventDefault();var t=$(this).data("zoomLevel"),n=$("#uiMap"),a=n.width()*t,r=n.height()*t;n.css({zoom:t,left:"50%",top:"50%",marginLeft:"-"+Math.floor(a/2)+"px",marginTop:"-"+Math.floor(r/2)+"px"})}),$("#uiMapImage").attr("src",e.config.map+"_nanomap_z"+e.config.mapZLevel+".png"),e}};return{addCallbacks:function(){NanoStateManager.addBeforeUpdateCallbacks(t),NanoStateManager.addAfterUpdateCallbacks(n)},removeCallbacks:function(){for(var e in t)t.hasOwnProperty(e)&&NanoStateManager.removeBeforeUpdateCallback(e);for(var e in n)n.hasOwnProperty(e)&&NanoStateManager.removeAfterUpdateCallback(e)}}}(),NanoBaseHelpers=function(){var t={syndicateMode:function(){return $("body").css("background-color","#8f1414"),$("body").css("background-image","url('uiBackground-Syndicate.png')"),$("body").css("background-position","50% 0"),$("body").css("background-repeat","repeat-x"),$("#uiTitleFluff").css("background-image","url('uiTitleFluff-Syndicate.png')"),$("#uiTitleFluff").css("background-position","50% 50%"),$("#uiTitleFluff").css("background-repeat","no-repeat"),""},combine:function(e,t){return e&&t?e.concat(t):e||t},dump:function(e){return JSON.stringify(e)},link:function(e,t,n,a,r,o){var i="",s="noIcon";void 0!==t&&t&&(i='<div class="uiLinkPendingIcon"></div><i class="fa fa-fw fa-'+t+'"></i>',s="hasIcon"),void 0!==r&&r||(r="link");var l="";void 0!==o&&o&&(l='id="'+o+'"');var c=NanoTransition.allocID(l+"_"+e.toString().replace(/[^a-z0-9_]/gi,"_")+"_"+t);return void 0!==a&&a?'<div unselectable="on" class="link '+s+" "+c+'" '+l+">"+i+e+'</div><script>$(function() { var newState = {"..class": "'+r+" "+a+'"}; var old = NanoTransition.transitionElement("'+c+'", null, newState, 200); NanoTransition.animateHover("'+c+'", null, old, newState); });<\/script>':'<div unselectable="on" class="linkActive '+s+" "+c+'" data-href="'+NanoUtility.generateHref(n)+'" '+l+">"+i+e+'</div><script>$(function() { var newState = {"..class": "'+r+'"}; var old = NanoTransition.transitionElement("'+c+'", null, newState, 200); NanoTransition.animateHover("'+c+'", null, old, newState); });<\/script>'},xor:function(e,t){return e^t},precisionRound:function(e,t){if(0==t)return Math.round(number);var n=Math.pow(10,t);return Math.round(e*n)/n},round:function(e){return Math.round(e)},fixed:function(e){return Math.round(10*e)/10},floor:function(e){return Math.floor(e)},ceil:function(e){return Math.ceil(e)},string:function(){if(0==arguments.length)return"";if(1==arguments.length)return arguments[0];if(1<arguments.length){stringArgs=[];for(var e=1;e<arguments.length;e++)stringArgs.push(arguments[e]);return arguments[0].format(stringArgs)}return""},formatNumber:function(e){var t=e.toString().split(".");return t[0]=t[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),t.join(".")},capitalizeFirstLetter:function(e){return e.charAt(0).toUpperCase()+e.slice(1)},displayBar:function(e,t,n,a,r){t<n?e<t?e=t:n<e&&(e=n):t<e?e=t:e<n&&(e=n),void 0!==a&&a||(a=""),void 0!==r&&r||(r="");var o=Math.round((e-t)/(n-t)*100),i=NanoTransition.allocID(t+"_"+n);return'<div class="displayBar '+i+" "+a+'"><div class="displayBarFill"></div><div class="displayBarText '+a+'">'+r+'</div></div><script>$(function() { NanoTransition.transitionElement("'+i+'", ".displayBarFill", {width: "'+o+'%", "..class": "'+a+'"}); });<\/script>'},dangerToClass:function(e){return 0==e?"good":1==e?"average":"bad"},dangerToSpan:function(e){return 0==e?'"<span class="good">Good</span>"':1==e?'"<span class="average">Minor Alert</span>"':'"<span class="bad">Major Alert</span>"'},generateHref:function(e){var t=$("body");_urlParameters=t.data("urlParameters");var n="?";for(var a in _urlParameters)_urlParameters.hasOwnProperty(a)&&("?"!==n&&(n+=";"),n+=a+"="+_urlParameters[a]);for(var a in e)e.hasOwnProperty(a)&&("?"!==n&&(n+=";"),n+=a+"="+e[a]);return n},displayDNABlocks:function(e,t,n,a,r){if(!e)return'<div class="notice">Please place a valid subject into the DNA modifier.</div>';var o=e.split(""),i='<div class="dnaBlock"><div class="link dnaBlockNumber">1</div>',s=1,l=1;for(var c in o)if(o.hasOwnProperty(c)&&"object"!=typeof o[c]){var u;u="UI"==r.toUpperCase()?{selectUIBlock:s,selectUISubblock:l}:{selectSEBlock:s,selectSESubblock:l};var d="linkActive";s==t&&l==n&&(d="selected"),i+='<div class="link '+d+' dnaSubBlock" data-href="'+NanoUtility.generateHref(u)+'" id="dnaBlock'+c+'">'+o[c]+"</div>",++c%a==0&&c<o.length?(l=1,i+='</div><div class="dnaBlock"><div class="link dnaBlockNumber">'+ ++s+"</div>"):l++}return i+="</div>"},cMirror:function(e){CodeMirror.fromTextArea(document.getElementById(e),{lineNumbers:!0,indentUnit:4,indentWithTabs:!0,theme:"lesser-dark"})},smoothNumber:function(e){var t=NanoTransition.allocID("n");return'<span class="'+t+'"></span><script>$(function() { var newState = {value: '+e+'}; var old = NanoTransition.updateElement("'+t+'", newState); NanoTransition.animateTextValue("'+t+'", null, -1, old["value"], newState["value"]); });<\/script>'},smoothRound:function(e,t){var n=NanoTransition.allocID(t);return void 0===t&&(placed=0),'<span class="'+n+'"></span><script>$(function() { var newState = {value: '+e.toFixed(t)+'}; var old = NanoTransition.updateElement("'+n+'", newState); NanoTransition.animateTextValue("'+n+'", null, '+t+', old["value"], newState["value"]); });<\/script>'}};return{addHelpers:function(){NanoTemplate.addHelpers(t)},removeHelpers:function(){for(var e in t)t.hasOwnProperty(e)&&NanoTemplate.removeHelper(e)}}}(),NanoStateDefaultClass.inheritsFrom(NanoStateClass);var NanoStateDefault=new NanoStateDefaultClass;function NanoStateDefaultClass(){this.key="default",this.key=this.key.toLowerCase(),NanoStateManager.addState(this)}NanoStatePDAClass.inheritsFrom(NanoStateClass);var NanoStatePDA=new NanoStatePDAClass;function NanoStatePDAClass(){this.key="pda",this.key=this.key.toLowerCase(),this.current_template="",NanoStateManager.addState(this)}function NanoStateClass(){}NanoStatePDAClass.prototype.onUpdate=function(t){NanoStateClass.prototype.onUpdate.call(this,t);var n=this;try{if(null!=t.data.app){var a=t.data.app.template;null!=a&&a!=n.current_template?$.when($.ajax({url:a+".tmpl",cache:!1,dataType:"text"})).done(function(e){e+='<div class="clearBoth"></div>';try{NanoTemplate.addTemplate("app",e),NanoTemplate.resetTemplate("app"),$("#uiApp").html(NanoTemplate.parse("app",t)),n.current_template=a,n.onAfterUpdate(t)}catch(e){return void reportError("ERROR: An error occurred while loading the PDA App UI: "+e.message)}}).fail(function(){reportError("ERROR: Loading template app("+a+") failed!")}):NanoTemplate.templateExists("app")&&$("#uiApp").html(NanoTemplate.parse("app",t))}}catch(e){return void reportError("ERROR: An error occurred while rendering the PDA App UI: "+e.message)}},NanoStateClass.prototype.key=null,NanoStateClass.prototype.layoutRendered=!1,NanoStateClass.prototype.contentRendered=!1,NanoStateClass.prototype.mapInitialised=!1,NanoStateClass.prototype.isCurrent=function(){return NanoStateManager.getCurrentState()==this},NanoStateClass.prototype.onAdd=function(e){NanoBaseCallbacks.addCallbacks(),NanoBaseHelpers.addHelpers()},NanoStateClass.prototype.onRemove=function(e){NanoBaseCallbacks.removeCallbacks(),NanoBaseHelpers.removeHelpers()},NanoStateClass.prototype.onBeforeUpdate=function(e){return e=NanoStateManager.executeBeforeUpdateCallbacks(e)},NanoStateClass.prototype.onUpdate=function(e){try{(!this.layoutRendered||e.config.hasOwnProperty("autoUpdateLayout")&&e.config.autoUpdateLayout)&&($("#uiLayout").html(NanoTemplate.parse("layout",e)),this.layoutRendered=!0),(!this.contentRendered||e.config.hasOwnProperty("autoUpdateContent")&&e.config.autoUpdateContent)&&($("#uiContent").html(NanoTemplate.parse("main",e)),this.contentRendered=!0),NanoTemplate.templateExists("mapContent")&&(this.mapInitialised||($("#uiMap").draggable(),$("#uiMapTooltip").off("click").on("click",function(e){e.preventDefault(),$(this).fadeOut(400)}),this.mapInitialised=!0),$("#uiMapContent").html(NanoTemplate.parse("mapContent",e)),e.config.hasOwnProperty("showMap")&&e.config.showMap?($("#uiContent").addClass("hidden"),$("#uiMapWrapper").removeClass("hidden")):($("#uiMapWrapper").addClass("hidden"),$("#uiContent").removeClass("hidden"))),NanoTemplate.templateExists("mapHeader")&&$("#uiMapHeader").html(NanoTemplate.parse("mapHeader",e)),NanoTemplate.templateExists("mapFooter")&&$("#uiMapFooter").html(NanoTemplate.parse("mapFooter",e))}catch(e){return void reportError("ERROR: An error occurred while rendering the UI: "+e.message)}},NanoStateClass.prototype.onAfterUpdate=function(e){NanoStateManager.executeAfterUpdateCallbacks(e)},NanoStateClass.prototype.alertText=function(e){alert(e)};var NanoTemplate=function(){var n={},a={},r={},o={},i=function(){if(Object.size(n)){for(var t in n)if(n.hasOwnProperty(t))return void $.when($.ajax({url:n[t],cache:!1,dataType:"text"})).done(function(e){e+='<div class="clearBoth"></div>';try{NanoTemplate.addTemplate(t,e)}catch(e){return void reportError("ERROR: An error occurred while loading the UI: "+e.message)}delete n[t],i()}).fail(function(){reportError("ERROR: Loading template "+t+"("+n[t]+") failed!")})}else $(document).trigger("templatesLoaded")};return{init:function(){null==(n=$("body").data("templateData"))&&reportError("Error: Template data did not load correctly."),i()},addTemplate:function(e,t){a[e]=t},templateExists:function(e){return a.hasOwnProperty(e)},resetTemplate:function(e){r[e]=null},parse:function(e,t){if(!r.hasOwnProperty(e)||!r[e]){if(!a.hasOwnProperty(e))return reportError('ERROR: Template "'+e+'" does not exist in _compiledTemplates!'),"<h2>Template error (does not exist)</h2>";!function(){for(var e in a)try{r[e]=doT.template(a[e],null,a)}catch(e){reportError(e.message)}}()}return"function"!=typeof r[e]?(reportError(r[e]),reportError('ERROR: Template "'+e+'" failed to compile!'),"<h2>Template error (failed to compile)</h2>"):r[e].call(this,t.data,t.config,o)},addHelper:function(e,t){jQuery.isFunction(t)?o[e]=t:reportError("NanoTemplate.addHelper failed to add "+e+" as it is not a function.")},addHelpers:function(e){for(var t in e)e.hasOwnProperty(t)&&NanoTemplate.addHelper(t,e[t])},removeHelper:function(e){helpers.hasOwnProperty(e)&&delete o[e]}}}();NanoTransition=function(){var s={},l={},t=0;NanoStateManager.addBeforeUpdateCallback("TransitionReset",function(e){return t=0,e});var i=function(e,t,n){var a,r=s[e];void 0===n&&(n=!1);var o=$("."+e);if(0==o.length)return t;if(o=o[0],r&&r.tagName==o.tagName&&r.tabIndex==o.tabIndex&&r.parent==o.parentNode.tagName&&r.children==o.children.length){if(a=l[e],n){var i={};for(k in a)i[k]=a[k];for(k in t)i[k]=t[k];t=i}}else a=t,s[e]={tagName:o.tagName,tabIndex:o.tabIndex,parent:o.parentNode.tagName,children:o.children.length};return l[e]=t,a},u=function(e,t){var n=$("."+e);return t?$(n).children(t):$(n)},o=function(e,t,n,a,r){var o=u(e,t);void 0===r&&(r=1900),o.css(n).animate(a,{duration:r,queue:!1});var i=n["..class"],s=a["..class"];if(i&&s&&(o.addClass(i),i!=s)){i=i.split(" "),s=s.split(" ");var l=i.filter(function(e){return-1==s.indexOf(e)}),c=s.filter(function(e){return-1==i.indexOf(e)});i=l.join(" "),s=c.join(" "),o.switchClass(i,s,{duration:r,queue:!1})}};return{allocID:function(e){return"_Hide_Map_close"==e?"transition__map":(void 0===e&&(e=""),"transition__"+t+++"_"+e.toString())},updateElement:i,animateElement:o,animateTextValue:function(e,t,n,a,r,o){var i=u(e,t);void 0===o&&(o=1900),-1==n?i.text(a.toString()):i.text(a.toFixed(n)),a!=r&&i.animate({i:1},{duration:o,queue:!1,step:function(e,t){t.elem.textContent=-1==n?(a*(1-e)+r*e).toString():(a*(1-e)+r*e).toFixed(n)}})},animateHover:function(e,t,n,a,r){var o=u(e,t);void 0===r&&(r=200),n["..hover"]&&o.addClass("hover"),o.hover(function(){o.stop(1,1).addClass("hover",{duration:r,queue:!1}),i(e,{"..hover":!0},!0)},function(){o.stop(1,1).removeClass("hover",{duration:r,queue:!1}),i(e,{"..hover":!1},!0)})},transitionElement:function(e,t,n,a){var r=i(e,n);return o(e,t,r,n,a),r}}}();var NanoWindow=function(){var o,i,s,r,l,c,e=function(){NanoUtility.winset("titlebar",0),NanoUtility.winset("can-resize",0),$(".fancy").show(),$("#uiTitleFluff").css("right","65px")},t=function(){$(".close").on("click",function(e){NanoUtility.close()}),$(".minimize").on("click",function(e){NanoUtility.winset("is-minimized","true")})},n=function(){$(document).on("mousemove",function(e){a(),u()}),$(document).on("mouseup",function(e){o&&(o=!1,s=i=null),r&&(r=!1,c=l=null)}),$("#uiTitleWrapper").on("mousedown",function(e){o=!0}),$("#resize").on("mousedown",function(e){r=!0})},a=function(e){var t,n,a,r;(null==e&&(e=window.event),o)&&(null==i&&(i=e.screenX),null==s&&(s=e.screenY),t=e.screenX-i+window.screenLeft,n=e.screenY-s+window.screenTop,a=t,r=n,NanoUtility.winset("pos",a+","+r),i=e.screenX,s=e.screenY)},u=function(){var e,t,n,a;(null==event&&(event=window.event),r)&&(null==l&&(l=event.screenX),null==c&&(c=event.screenY),e=Math.max(150,event.screenX-l+window.innerWidth),t=Math.max(150,event.screenY-c+window.innerHeight),n=e,a=t,NanoUtility.winset("size",n+","+a),l=event.screenX,c=event.screenY)};return{init:function(){$(document).on("templatesLoaded",function(){NanoStateManager.getData().config.user.fancy&&(e(),t(),n())})}}}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5hbm8uanMiXSwibmFtZXMiOlsiTmFub1V0aWxpdHkiLCJfdXJsUGFyYW1ldGVycyIsImluaXQiLCJib2R5IiwiJCIsImRhdGEiLCJnZW5lcmF0ZUhyZWYiLCJwYXJhbWV0ZXJzIiwicXVlcnlTdHJpbmciLCJrZXkiLCJoYXNPd25Qcm9wZXJ0eSIsIndpbnNldCIsInZhbHVlIiwid2luZG93Iiwib2JqIiwicGFyYW1zIiwiTmFub1N0YXRlTWFuYWdlciIsImdldERhdGEiLCJjb25maWciLCJyZWYiLCJsb2NhdGlvbiIsImhyZWYiLCJleHRlbmQiLCJmaXJzdCIsInNlY29uZCIsIk9iamVjdCIsImtleXMiLCJmb3JFYWNoIiwic2Vjb25kVmFsIiwicHJvdG90eXBlIiwidG9TdHJpbmciLCJjYWxsIiwidXJsIiwiVXJsIiwicXVlcnkiLCJjbG9zZSIsImNvbW1hbmQiLCJzcmMiLCJ0aGlzIiwialF1ZXJ5IiwicmVwb3J0RXJyb3IiLCJkb1QiLCJzdHIiLCJlbmNvZGVVUklDb21wb25lbnQiLCJhbGVydCIsImRvY3VtZW50IiwicmVhZHkiLCJOYW5vVGVtcGxhdGUiLCJOYW5vV2luZG93IiwiQXJyYXkiLCJpbmRleE9mIiwiZWx0IiwibGVuIiwibGVuZ3RoIiwiZnJvbSIsIk51bWJlciIsImFyZ3VtZW50cyIsIk1hdGgiLCJjZWlsIiwiZmxvb3IiLCJTdHJpbmciLCJmb3JtYXQiLCJhcmdzIiwicmVwbGFjZSIsInJlZ2V4IiwiaXRlbSIsImludFZhbCIsInBhcnNlSW50Iiwic3Vic3RyaW5nIiwiUmVnRXhwIiwic2l6ZSIsImNvbnNvbGUiLCJsb2ciLCJ0b1RpdGxlQ2FzZSIsInNtYWxsV29yZHMiLCJtYXRjaCIsInAxIiwiaW5kZXgiLCJ0aXRsZSIsInNlYXJjaCIsImNoYXJBdCIsInRvTG93ZXJDYXNlIiwic3Vic3RyIiwidG9VcHBlckNhc2UiLCJhamF4U2V0dXAiLCJjYWNoZSIsIkZ1bmN0aW9uIiwiaW5oZXJpdHNGcm9tIiwicGFyZW50Q2xhc3NPck9iamVjdCIsImNvbnN0cnVjdG9yIiwicGFyZW50IiwidHJpbSIsImNrZXkiLCJfaXNJbml0aWFsaXNlZCIsIl9kYXRhIiwiX2JlZm9yZVVwZGF0ZUNhbGxiYWNrcyIsIl9hZnRlclVwZGF0ZUNhbGxiYWNrcyIsIl9zdGF0ZXMiLCJfY3VycmVudFN0YXRlIiwiZG9VcGRhdGUiLCJvbkJlZm9yZVVwZGF0ZSIsIm9uVXBkYXRlIiwib25BZnRlclVwZGF0ZSIsImV4ZWN1dGVDYWxsYmFja3MiLCJjYWxsYmFja3MiLCJpc0Z1bmN0aW9uIiwiSlNPTiIsInN0cmluZ2lmeSIsInN0YXRlS2V5Iiwic2V0Q3VycmVudFN0YXRlIiwib24iLCJyZWNlaXZlVXBkYXRlRGF0YSIsImpzb25TdHJpbmciLCJ1cGRhdGVEYXRhIiwicGFyc2VKU09OIiwiZXJyb3IiLCJuYW1lIiwibWVzc2FnZSIsImFkZEJlZm9yZVVwZGF0ZUNhbGxiYWNrIiwiY2FsbGJhY2tGdW5jdGlvbiIsImFkZEJlZm9yZVVwZGF0ZUNhbGxiYWNrcyIsImNhbGxiYWNrS2V5IiwicmVtb3ZlQmVmb3JlVXBkYXRlQ2FsbGJhY2siLCJleGVjdXRlQmVmb3JlVXBkYXRlQ2FsbGJhY2tzIiwiYWRkQWZ0ZXJVcGRhdGVDYWxsYmFjayIsImFkZEFmdGVyVXBkYXRlQ2FsbGJhY2tzIiwicmVtb3ZlQWZ0ZXJVcGRhdGVDYWxsYmFjayIsImV4ZWN1dGVBZnRlclVwZGF0ZUNhbGxiYWNrcyIsImFkZFN0YXRlIiwic3RhdGUiLCJOYW5vU3RhdGVDbGFzcyIsInByZXZpb3VzU3RhdGUiLCJvblJlbW92ZSIsIm9uQWRkIiwiZ2V0Q3VycmVudFN0YXRlIiwiTmFub0Jhc2VDYWxsYmFja3MiLCJfY2FuQ2xpY2siLCJfYmFzZUJlZm9yZVVwZGF0ZUNhbGxiYWNrcyIsIl9iYXNlQWZ0ZXJVcGRhdGVDYWxsYmFja3MiLCJzdGF0dXMiLCJ1aVN0YXR1c0NsYXNzIiwicmVtb3ZlQ2xhc3MiLCJhZGRDbGFzcyIsInN0b3BUaW1lIiwib2ZmIiwiZXZlbnQiLCJwcmV2ZW50RGVmYXVsdCIsIm9uZVRpbWUiLCJuYW5vbWFwIiwiaHRtbCIsImNoaWxkcmVuIiwic2hvdyIsImZhZGVPdXQiLCJ6b29tTGV2ZWwiLCJ1aU1hcE9iamVjdCIsInVpTWFwV2lkdGgiLCJ3aWR0aCIsInVpTWFwSGVpZ2h0IiwiaGVpZ2h0IiwiY3NzIiwiem9vbSIsImxlZnQiLCJ0b3AiLCJtYXJnaW5MZWZ0IiwibWFyZ2luVG9wIiwiYXR0ciIsImFkZENhbGxiYWNrcyIsInJlbW92ZUNhbGxiYWNrcyIsIk5hbm9CYXNlSGVscGVycyIsIl9iYXNlSGVscGVycyIsInN5bmRpY2F0ZU1vZGUiLCJjb21iaW5lIiwiYXJyMSIsImFycjIiLCJjb25jYXQiLCJkdW1wIiwibGluayIsInRleHQiLCJpY29uIiwiZWxlbWVudENsYXNzIiwiZWxlbWVudElkIiwiaWNvbkh0bWwiLCJpY29uQ2xhc3MiLCJlbGVtZW50SWRIdG1sIiwidGlkIiwiTmFub1RyYW5zaXRpb24iLCJhbGxvY0lEIiwieG9yIiwibnVtYmVyIiwiYml0IiwicHJlY2lzaW9uUm91bmQiLCJwbGFjZXMiLCJyb3VuZCIsIm11bHRpcGxpZXIiLCJwb3ciLCJmaXhlZCIsInN0cmluZyIsInN0cmluZ0FyZ3MiLCJpIiwicHVzaCIsImZvcm1hdE51bWJlciIsIngiLCJwYXJ0cyIsInNwbGl0Iiwiam9pbiIsImNhcGl0YWxpemVGaXJzdExldHRlciIsInNsaWNlIiwiZGlzcGxheUJhciIsInJhbmdlTWluIiwicmFuZ2VNYXgiLCJzdHlsZUNsYXNzIiwic2hvd1RleHQiLCJwZXJjZW50YWdlIiwiZGFuZ2VyVG9DbGFzcyIsImxldmVsIiwiZGFuZ2VyVG9TcGFuIiwiZGlzcGxheUROQUJsb2NrcyIsImRuYVN0cmluZyIsInNlbGVjdGVkQmxvY2siLCJzZWxlY3RlZFN1YmJsb2NrIiwiYmxvY2tTaXplIiwicGFyYW1LZXkiLCJjaGFyYWN0ZXJzIiwiYmxvY2siLCJzdWJibG9jayIsInNlbGVjdFVJQmxvY2siLCJzZWxlY3RVSVN1YmJsb2NrIiwic2VsZWN0U0VCbG9jayIsInNlbGVjdFNFU3ViYmxvY2siLCJjTWlycm9yIiwidGV4dGJveCIsIkNvZGVNaXJyb3IiLCJmcm9tVGV4dEFyZWEiLCJnZXRFbGVtZW50QnlJZCIsImxpbmVOdW1iZXJzIiwiaW5kZW50VW5pdCIsImluZGVudFdpdGhUYWJzIiwidGhlbWUiLCJzbW9vdGhOdW1iZXIiLCJzbW9vdGhSb3VuZCIsInVuZGVmaW5lZCIsInBsYWNlZCIsInRvRml4ZWQiLCJhZGRIZWxwZXJzIiwicmVtb3ZlSGVscGVycyIsImhlbHBlcktleSIsInJlbW92ZUhlbHBlciIsIk5hbm9TdGF0ZURlZmF1bHRDbGFzcyIsIk5hbm9TdGF0ZURlZmF1bHQiLCJOYW5vU3RhdGVQREFDbGFzcyIsIk5hbm9TdGF0ZVBEQSIsImN1cnJlbnRfdGVtcGxhdGUiLCJ0ZW1wbGF0ZSIsIndoZW4iLCJhamF4IiwiZGF0YVR5cGUiLCJkb25lIiwidGVtcGxhdGVNYXJrdXAiLCJhZGRUZW1wbGF0ZSIsInJlc2V0VGVtcGxhdGUiLCJwYXJzZSIsImZhaWwiLCJ0ZW1wbGF0ZUV4aXN0cyIsImxheW91dFJlbmRlcmVkIiwiY29udGVudFJlbmRlcmVkIiwibWFwSW5pdGlhbGlzZWQiLCJpc0N1cnJlbnQiLCJuZXh0U3RhdGUiLCJkcmFnZ2FibGUiLCJhbGVydFRleHQiLCJfdGVtcGxhdGVEYXRhIiwiX3RlbXBsYXRlcyIsIl9jb21waWxlZFRlbXBsYXRlcyIsIl9oZWxwZXJzIiwibG9hZE5leHRUZW1wbGF0ZSIsInRyaWdnZXIiLCJ0ZW1wbGF0ZVN0cmluZyIsInRlbXBsYXRlS2V5IiwiY29tcGlsZVRlbXBsYXRlcyIsImFkZEhlbHBlciIsImhlbHBlck5hbWUiLCJoZWxwZXJGdW5jdGlvbiIsImhlbHBlcnMiLCJpZENhY2hlIiwic3RhdGVDYWNoZSIsImN1cnJlbnRJRCIsIl91cGRhdGVFbGVtZW50IiwiaWQiLCJuZXdTdGF0ZSIsIm1lcmdlIiwib2xkU3RhdGUiLCJlbGVtZW50IiwidGFnTmFtZSIsInRhYkluZGV4IiwicGFyZW50Tm9kZSIsIm5ld1N0YXRlQ29weSIsImsiLCJfcmVzb2x2ZVRhcmdldCIsImZpbHRlciIsIl9hbmltYXRlRWxlbWVudCIsInRpbWUiLCJ0YXJnZXQiLCJhbmltYXRlIiwiZHVyYXRpb24iLCJxdWV1ZSIsIm9sZENsYXNzIiwibmV3Q2xhc3MiLCJmaWx0ZXJlZE9sZENsYXNzIiwiZmlsdGVyZWROZXdDbGFzcyIsInN3aXRjaENsYXNzIiwidW5pcXVlSUQiLCJ1cGRhdGVFbGVtZW50IiwiYW5pbWF0ZUVsZW1lbnQiLCJhbmltYXRlVGV4dFZhbHVlIiwib2xkVmFsdWUiLCJuZXdWYWx1ZSIsInN0ZXAiLCJub3ciLCJmeCIsImVsZW0iLCJ0ZXh0Q29udGVudCIsImFuaW1hdGVIb3ZlciIsImhvdmVyIiwic3RvcCIsIi4uaG92ZXIiLCJ0cmFuc2l0aW9uRWxlbWVudCIsIm9sZCIsImRyYWdnaW5nIiwieERyYWciLCJ5RHJhZyIsInJlc2l6aW5nIiwieFJlc2l6ZSIsInlSZXNpemUiLCJmYW5jeUNocm9tZSIsImF0dGFjaEJ1dHRvbnMiLCJhdHRhY2hEcmFnQW5kUmVzaXplIiwiZHJhZyIsInJlc2l6ZSIsInkiLCJzY3JlZW5YIiwic2NyZWVuWSIsInciLCJoIiwibWF4IiwiaW5uZXJXaWR0aCIsImlubmVySGVpZ2h0IiwidXNlciIsImZhbmN5Il0sIm1hcHBpbmdzIjoiQUFDQSxJQUFJQSxZQUFjLFdBQ2QsSUFBSUMsRUFBaUIsR0FFckIsTUFBTyxDQUNIQyxLQUFNLFdBQ0YsSUFBSUMsRUFBT0MsRUFBRSxRQUNiSCxFQUFpQkUsRUFBS0UsS0FBSyxrQkFHL0JDLGFBQWMsU0FBVUMsR0FDcEIsSUFBSUMsRUFBYyxJQUVsQixJQUFLLElBQUlDLEtBQU9SLEVBQ1JBLEVBQWVTLGVBQWVELEtBQ1YsTUFBaEJELElBQ0FBLEdBQWUsS0FFbkJBLEdBQWVDLEVBQU0sSUFBTVIsRUFBZVEsSUFJbEQsSUFBSyxJQUFJQSxLQUFPRixFQUVSQSxFQUFXRyxlQUFlRCxLQUNOLE1BQWhCRCxJQUNBQSxHQUFlLEtBRW5CQSxHQUFlQyxFQUFNLElB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LE1BQU84TCxFQUFJLElBQU15SSxHQWlGcENWLEVBQVF2TCxFQUFNa00sUUFDZFYsRUFBUXhMLEVBQU1tTSxVQUdkSCxFQUFTLFdBQ1QsSUFBSXhJLEVBQUd5SSxFQXBGYUcsRUFBR0MsR0FxRlYsTUFBVHJNLFFBQ0FBLE1BQVFwSSxPQUFPb0ksT0FHZHlMLEtBSVUsTUFBWEMsSUFDQUEsRUFBVTFMLE1BQU1rTSxTQUdMLE1BQVhQLElBQ0FBLEVBQVUzTCxNQUFNbU0sU0FHcEIzSSxFQUFJaEosS0FBSzhSLElBQUksSUFBTXRNLE1BQU1rTSxRQUFVUixFQUFXOVQsT0FBTzJVLFlBQ3JETixFQUFJelIsS0FBSzhSLElBQUksSUFBTXRNLE1BQU1tTSxRQUFVUixFQUFXL1QsT0FBTzRVLGFBdEdqQ0osRUF1R1o1SSxFQXZHZTZJLEVBdUdaSixFQXRHWmxWLFlBQVlXLE9BQU8sT0FBUTBVLEVBQUksSUFBTUMsR0F1R3BDWCxFQUFVMUwsTUFBTWtNLFFBQ2hCUCxFQUFVM0wsTUFBTW1NLFVBRXBCLE1BQU8sQ0FDSGxWLEtBQU0sV0FDRkUsRUFBRXlDLFVBQVVpRSxHQUFHLGtCQUFtQixXQXhHbkM5RixpQkFBaUJDLFVBQVVDLE9BQU93VSxLQUFLQyxRQUN0Q2QsSUFDQUMsSUFDQUMsU0FiSyIsImZpbGUiOiJuYW5vLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8gTmFub1V0aWxpdHkgaXMgdGhlIHBsYWNlIHRvIHN0b3JlIHV0aWxpdHkgZnVuY3Rpb25zXHJcbnZhciBOYW5vVXRpbGl0eSA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBfdXJsUGFyYW1ldGVycyA9IHt9OyAvLyBUaGlzIGlzIHBvcHVsYXRlZCB3aXRoIHRoZSBiYXNlIHVybCBwYXJhbWV0ZXJzICh1c2VkIGJ5IGFsbCBsaW5rcyksIHdoaWNoIGlzIHByb2JhYnkganVzdCB0aGUgXCJzcmNcIiBwYXJhbWV0ZXJcclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIGluaXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIGJvZHkgPSAkKCdib2R5Jyk7IC8vIFdlIHN0b3JlIGRhdGEgaW4gdGhlIGJvZHkgdGFnLCBpdCdzIGFzIGdvb2QgYSBwbGFjZSBhcyBhbnlcclxuICAgICAgICAgICAgX3VybFBhcmFtZXRlcnMgPSBib2R5LmRhdGEoJ3VybFBhcmFtZXRlcnMnKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIC8vIGdlbmVyYXRlIGEgQnlvbmQgaHJlZiwgY29tYmluZXMgX3VybFBhcmFtZXRlcnMgd2l0aCBwYXJhbWV0ZXJzXHJcbiAgICAgICAgZ2VuZXJhdGVIcmVmOiBmdW5jdGlvbiAocGFyYW1ldGVycykge1xyXG4gICAgICAgICAgICB2YXIgcXVlcnlTdHJpbmcgPSAnPyc7XHJcblxyXG4gICAgICAgICAgICBmb3IgKHZhciBrZXkgaW4gX3VybFBhcmFtZXRlcnMpIHtcclxuICAgICAgICAgICAgICAgIGlmIChfdXJsUGFyYW1ldGVycy5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHF1ZXJ5U3RyaW5nICE9PSAnPycpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcXVlcnlTdHJpbmcgKz0gJzsnO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBxdWVyeVN0cmluZyArPSBrZXkgKyAnPScgKyBfdXJsUGFyYW1ldGVyc1trZXldO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBmb3IgKHZhciBrZXkgaW4gcGFyYW1ldGVycylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYgKHBhcmFtZXRlcnMuaGFzT3duUHJvcGVydHkoa2V5KSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChxdWVyeVN0cmluZyAhPT0gJz8nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXJ5U3RyaW5nICs9ICc7JztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgcXVlcnlTdHJpbmcgKz0ga2V5ICsgJz0nICsgcGFyYW1ldGVyc1trZXldO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBxdWVyeVN0cmluZztcclxuICAgICAgICB9LFxyXG4gICAgICAgIHdpbnNldDogZnVuY3Rpb24gKGtleSwgdmFsdWUsIHdpbmRvdykge1xyXG4gICAgICAgICAgICB2YXIgb2JqLCBwYXJhbXMsIHdpbnNldFJlZjtcclxuICAgICAgICAgICAgaWYgKHdpbmRvdyA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICB3aW5kb3cgPSBOYW5vU3RhdGVNYW5hZ2VyLmdldERhdGEoKS5jb25maWcud2luZG93LnJlZjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBwYXJhbXMgPSAoXHJcbiAgICAgICAgICAgICAgICBvYmogPSB7fSxcclxuICAgICAgICAgICAgICAgIG9ialt3aW5kb3cgKyBcIi5cIiArIGtleV0gPSB2YWx1ZSxcclxuICAgICAgICAgICAgICAgIG9ialxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgICByZXR1cm4gbG9jYXRpb24uaHJlZiA9IE5hbm9VdGlsaXR5LmhyZWYoXCJ3aW5zZXRcIiwgcGFyYW1zKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGV4dGVuZDogZnVuY3Rpb24oZmlyc3QsIHNlY29uZCkge1xyXG4gICAgICAgICAgICBPYmplY3Qua2V5cyhzZWNvbmQpLmZvckVhY2goZnVuY3Rpb24oa2V5KSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgc2Vjb25kVmFsO1xyXG4gICAgICAgICAgICAgICAgc2Vjb25kVmFsID0gc2Vjb25kW2tleV07XHJcbiAgICAgICAgICAgICAgICBpZiAoc2Vjb25kVmFsICYmIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChzZWNvbmRWYWwpID09PSBcIltvYmplY3QgT2JqZWN0XVwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZmlyc3Rba2V5XSA9IGZpcnN0W2tleV0gfHwge307XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIE5hbm9VdGlsaXR5LmV4dGVuZChmaXJzdFtrZXldLCBzZWNvbmRWYWwpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmlyc3Rba2V5XSA9IHNlY29uZFZhbDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHJldHVybiBmaXJzdDtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGhyZWY6IGZ1bmN0aW9uKHVybCwgcGFyYW1zKSB7XHJcbiAgICAgICAgICAgIGlmICh1cmwgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgdXJsID0gXCJcIjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAocGFyYW1zID09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIHBhcmFtcyA9IHt9O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHVybCA9IG5ldyBVcmwoXCJieW9uZDovL1wiICsgdXJsKTtcclxuICAgICAgICAgICAgTmFub1V0aWxpdHkuZXh0ZW5kKHVybC5xdWVyeSwgcGFyYW1zKTtcclxuICAgICAgICAgICAgcmV0dXJuIHVybDtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGNsb3NlOiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgdmFyIHBhcmFtcztcclxuICAgICAgICAgICAgcGFyYW1zID0ge1xyXG4gICAgICAgICAgICAgICAgY29tbWFuZDogXCJuYW5vY2xvc2UgXCIgKyBfdXJsUGFyYW1ldGVycy5zcmNcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgdGhpcy53aW5zZXQoXCJpcy12aXNpYmxlXCIsIFwiZmFsc2VcIik7XHJcbiAgICAgICAgICAgIHJldHVybiBsb2NhdGlvbi5ocmVmID0gTmFub1V0aWxpdHkuaHJlZihcIndpbnNldFwiLCBwYXJhbXMpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufSAoKTtcclxuXHJcbmlmICh0eXBlb2YgalF1ZXJ5ID09ICd1bmRlZmluZWQnKSB7ICBcclxuICAgIHJlcG9ydEVycm9yKCdFUlJPUjogSmF2YXNjcmlwdCBsaWJyYXJ5IGZhaWxlZCB0byBsb2FkIScpO1xyXG59XHJcbmlmICh0eXBlb2YgZG9UID09ICd1bmRlZmluZWQnKSB7ICBcclxuICAgIHJlcG9ydEVycm9yKCdFUlJPUjogVGVtcGxhdGUgZW5naW5lIGZhaWxlZCB0byBsb2FkIScpO1xyXG59XHJcblxyXG52YXIgcmVwb3J0RXJyb3IgPSBmdW5jdGlvbiAoc3RyKSB7XHJcbiAgICB3aW5kb3cubG9jYXRpb24gPSBcImJ5b25kOi8vP25hbm9fZXJyPVwiICsgZW5jb2RlVVJJQ29tcG9uZW50KHN0cik7XHJcbiAgICBhbGVydChzdHIpO1xyXG59XHJcblxyXG4vLyBBbGwgc2NyaXB0cyBhcmUgaW5pdGlhbGlzZWQgaGVyZSwgdGhpcyBhbGxvd3MgY29udHJvbCBvZiBpbml0IG9yZGVyXHJcbiQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uICgpIHtcclxuICAgIE5hbm9VdGlsaXR5LmluaXQoKTtcclxuICAgIE5hbm9TdGF0ZU1hbmFnZXIuaW5pdCgpO1xyXG4gICAgTmFub1RlbXBsYXRlLmluaXQoKTtcclxuICAgIE5hbm9XaW5kb3cuaW5pdCgpO1xyXG59KTtcclxuXHJcbmlmICghQXJyYXkucHJvdG90eXBlLmluZGV4T2YpXHJcbntcclxuICAgIEFycmF5LnByb3RvdHlwZS5pbmRleE9mID0gZnVuY3Rpb24oZWx0IC8qLCBmcm9tKi8pXHJcbiAgICB7XHJcbiAgICAgICAgdmFyIGxlbiA9IHRoaXMubGVuZ3RoO1xyXG5cclxuICAgICAgICB2YXIgZnJvbSA9IE51bWJlcihhcmd1bWVudHNbMV0pIHx8IDA7XHJcbiAgICAgICAgZnJvbSA9IChmcm9tIDwgMClcclxuICAgICAgICAgICAgPyBNYXRoLmNlaWwoZnJvbSlcclxuICAgICAgICAgICAgOiBNYXRoLmZsb29yKGZyb20pO1xyXG4gICAgICAgIGlmIChmcm9tIDwgMClcclxuICAgICAgICAgICAgZnJvbSArPSBsZW47XHJcblxyXG4gICAgICAgIGZvciAoOyBmcm9tIDwgbGVuOyBmcm9tKyspXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoZnJvbSBpbiB0aGlzICYmXHJcbiAgICAgICAgICAgICAgICB0aGlzW2Zyb21dID09PSBlbHQpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZnJvbTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIC0xO1xyXG4gICAgfTtcclxufTtcclxuXHJcbmlmICghU3RyaW5nLnByb3RvdHlwZS5mb3JtYXQpXHJcbntcclxuICAgIFN0cmluZy5wcm90b3R5cGUuZm9ybWF0ID0gZnVuY3Rpb24gKGFyZ3MpIHtcclxuICAgICAgICB2YXIgc3RyID0gdGhpcztcclxuICAgICAgICByZXR1cm4gc3RyLnJlcGxhY2UoU3RyaW5nLnByb3RvdHlwZS5mb3JtYXQucmVnZXgsIGZ1bmN0aW9uKGl0ZW0pIHtcclxuICAgICAgICAgICAgdmFyIGludFZhbCA9IHBhcnNlSW50KGl0ZW0uc3Vic3RyaW5nKDEsIGl0ZW0ubGVuZ3RoIC0gMSkpO1xyXG4gICAgICAgICAgICB2YXIgcmVwbGFjZTtcclxuICAgICAgICAgICAgaWYgKGludFZhbCA+PSAwKSB7XHJcbiAgICAgICAgICAgICAgICByZXBsYWNlID0gYXJnc1tpbnRWYWxdO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGludFZhbCA9PT0gLTEpIHtcclxuICAgICAgICAgICAgICAgIHJlcGxhY2UgPSBcIntcIjtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChpbnRWYWwgPT09IC0yKSB7XHJcbiAgICAgICAgICAgICAgICByZXBsYWNlID0gXCJ9XCI7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXBsYWNlID0gXCJcIjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gcmVwbGFjZTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBTdHJpbmcucHJvdG90eXBlLmZvcm1hdC5yZWdleCA9IG5ldyBSZWdFeHAoXCJ7LT9bMC05XSt9XCIsIFwiZ1wiKTtcclxufTtcclxuXHJcbk9iamVjdC5zaXplID0gZnVuY3Rpb24ob2JqKSB7XHJcbiAgICB2YXIgc2l6ZSA9IDAsIGtleTtcclxuICAgIGZvciAodmFyIGtleSBpbiBvYmopIHtcclxuICAgICAgICBpZiAob2JqLmhhc093blByb3BlcnR5KGtleSkpIHNpemUrKztcclxuICAgIH1cclxuICAgIHJldHVybiBzaXplO1xyXG59O1xyXG5cclxuaWYoIXdpbmRvdy5jb25zb2xlKSB7XHJcbiAgICB3aW5kb3cuY29uc29sZSA9IHtcclxuICAgICAgICBsb2cgOiBmdW5jdGlvbihzdHIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbn07XHJcblxyXG5TdHJpbmcucHJvdG90eXBlLnRvVGl0bGVDYXNlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIHNtYWxsV29yZHMgPSAvXihhfGFufGFuZHxhc3xhdHxidXR8Ynl8ZW58Zm9yfGlmfGlufG9mfG9ufG9yfHRoZXx0b3x2cz9cXC4/fHZpYSkkL2k7XHJcblxyXG4gICAgcmV0dXJuIHRoaXMucmVwbGFjZSgvKFteXFxXX10rW15cXHMtXSopICovZywgZnVuY3Rpb24gKG1hdGNoLCBwMSwgaW5kZXgsIHRpdGxlKSB7XHJcbiAgICAgICAgaWYgKGluZGV4ID4gMCAmJiBpbmRleCArIHAxLmxlbmd0aCAhPT0gdGl0bGUubGVuZ3RoICYmXHJcbiAgICAgICAgICAgIHAxLnNlYXJjaChzbWFsbFdvcmRzKSA+IC0xICYmIHRpdGxlLmNoYXJBdChpbmRleCAtIDIpICE9PSBcIjpcIiAmJlxyXG4gICAgICAgICAgICB0aXRsZS5jaGFyQXQoaW5kZXggLSAxKS5zZWFyY2goL1teXFxzLV0vKSA8IDApIHtcclxuICAgICAgICAgICAgcmV0dXJuIG1hdGNoLnRvTG93ZXJDYXNlKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAocDEuc3Vic3RyKDEpLnNlYXJjaCgvW0EtWl18XFwuLi8pID4gLTEpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG1hdGNoO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIG1hdGNoLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgbWF0Y2guc3Vic3RyKDEpO1xyXG4gICAgfSk7XHJcbn07XHJcblxyXG4kLmFqYXhTZXR1cCh7XHJcbiAgICBjYWNoZTogZmFsc2VcclxufSk7XHJcblxyXG5GdW5jdGlvbi5wcm90b3R5cGUuaW5oZXJpdHNGcm9tID0gZnVuY3Rpb24gKHBhcmVudENsYXNzT3JPYmplY3QpIHtcclxuICAgIHRoaXMucHJvdG90eXBlID0gbmV3IHBhcmVudENsYXNzT3JPYmplY3Q7XHJcbiAgICB0aGlzLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IHRoaXM7XHJcbiAgICB0aGlzLnByb3RvdHlwZS5wYXJlbnQgPSBwYXJlbnRDbGFzc09yT2JqZWN0LnByb3RvdHlwZTtcclxuICAgIHJldHVybiB0aGlzO1xyXG59O1xyXG5cclxuaWYgKCFTdHJpbmcucHJvdG90eXBlLnRyaW0pIHtcclxuICAgIFN0cmluZy5wcm90b3R5cGUudHJpbSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5yZXBsYWNlKC9eXFxzK3xcXHMrJC9nLCAnJyk7XHJcbiAgICB9O1xyXG59XHJcblxyXG4vLyBSZXBsaWNhdGUgdGhlIGNrZXkgcHJvYyBmcm9tIEJZT05EXHJcbmlmICghU3RyaW5nLnByb3RvdHlwZS5ja2V5KSB7XHJcbiAgICBTdHJpbmcucHJvdG90eXBlLmNrZXkgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucmVwbGFjZSgvXFxXL2csICcnKS50b0xvd2VyQ2FzZSgpO1xyXG4gICAgfTtcclxufVxuLy8gTmFub1N0YXRlTWFuYWdlciBoYW5kbGVzIGRhdGEgZnJvbSB0aGUgc2VydmVyIGFuZCB1c2VzIGl0IHRvIHJlbmRlciB0ZW1wbGF0ZXNcclxuTmFub1N0YXRlTWFuYWdlciA9IGZ1bmN0aW9uICgpIFxyXG57XHJcbiAgICAvLyBfaXNJbml0aWFsaXNlZCBpcyBzZXQgdG8gdHJ1ZSB3aGVuIGFsbCBvZiB0aGlzIHVpJ3MgdGVtcGxhdGVzIGhhdmUgYmVlbiBwcm9jZXNzZWQvcmVuZGVyZWRcclxuICAgIHZhciBfaXNJbml0aWFsaXNlZCA9IGZhbHNlO1xyXG4gICAgLy8gdGhlIGRhdGEgZm9yIHRoaXMgdWlcclxuICAgIHZhciBfZGF0YSA9IG51bGw7XHJcblxyXG4gICAgLy8gdGhpcyBpcyBhbiBhcnJheSBvZiBjYWxsYmFja3Mgd2hpY2ggYXJlIGNhbGxlZCB3aGVuIG5ldyBkYXRhIGFycml2ZXMsIGJlZm9yZSBpdCBpcyBwcm9jZXNzZWRcclxuICAgIHZhciBfYmVmb3JlVXBkYXRlQ2FsbGJhY2tzID0ge307XHJcbiAgICAvLyB0aGlzIGlzIGFuIGFycmF5IG9mIGNhbGxiYWNrcyB3aGljaCBhcmUgY2FsbGVkIHdoZW4gbmV3IGRhdGEgYXJyaXZlcywgYmVmb3JlIGl0IGlzIHByb2Nlc3NlZFxyXG4gICAgdmFyIF9hZnRlclVwZGF0ZUNhbGxiYWNrcyA9IHt9O1xyXG4gICAgXHJcbiAgICAvLyB0aGlzIGlzIGFuIGFycmF5IG9mIHN0YXRlIG9iamVjdHMsIHRoZXNlIGNhbiBiZSB1c2VkIHRvIHByb3ZpZGUgY3VzdG9tIGphdmFzY3JpcHQgbG9naWNcclxuICAgIHZhciBfc3RhdGVzID0ge307XHJcbiAgICB2YXIgX2N1cnJlbnRTdGF0ZSA9IG51bGw7XHJcbiAgICBcclxuICAgIC8vIHRoZSBpbml0IGZ1bmN0aW9uIGlzIGNhbGxlZCB3aGVuIHRoZSB1aSBoYXMgbG9hZGVkXHJcbiAgICAvLyB0aGlzIGZ1bmN0aW9uIHNldHMgdXAgdGhlIHRlbXBsYXRlcyBhbmQgYmFzZSBmdW5jdGlvbmFsaXR5XHJcbiAgICB2YXIgaW5pdCA9IGZ1bmN0aW9uICgpIFxyXG4gICAge1xyXG4gICAgICAgIC8vIFdlIHN0b3JlIGluaXRpYWxEYXRhIGFuZCB0ZW1wbGF0ZURhdGEgaW4gdGhlIGJvZHkgdGFnLCBpdCdzIGFzIGdvb2QgYSBwbGFjZSBhcyBhbnlcclxuICAgICAgICBfZGF0YSA9ICQoJ2JvZHknKS5kYXRhKCdpbml0aWFsRGF0YScpOyAgXHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKF9kYXRhID09IG51bGwgfHwgIV9kYXRhLmhhc093blByb3BlcnR5KCdjb25maWcnKSB8fCAhX2RhdGEuaGFzT3duUHJvcGVydHkoJ2RhdGEnKSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJlcG9ydEVycm9yKCdFcnJvcjogSW5pdGlhbCBkYXRhIGRpZCBub3QgbG9hZCBjb3JyZWN0bHkuJyArIEpTT04uc3RyaW5naWZ5KF9kYXRhKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgc3RhdGVLZXkgPSAnZGVmYXVsdCc7XHJcbiAgICAgICAgaWYgKF9kYXRhWydjb25maWcnXS5oYXNPd25Qcm9wZXJ0eSgnc3RhdGVLZXknKSAmJiBfZGF0YVsnY29uZmlnJ11bJ3N0YXRlS2V5J10pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBzdGF0ZUtleSA9IF9kYXRhWydjb25maWcnXVsnc3RhdGVLZXknXS50b0xvd2VyQ2FzZSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgTmFub1N0YXRlTWFuYWdlci5zZXRDdXJyZW50U3RhdGUoc3RhdGVLZXkpO1xyXG4gICAgICAgIFxyXG4gICAgICAgICQoZG9jdW1lbnQpLm9uKCd0ZW1wbGF0ZXNMb2FkZWQnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGRvVXBkYXRlKF9kYXRhKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIF9pc0luaXRpYWxpc2VkID0gdHJ1ZTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBcclxuICAgIC8vIFJlY2VpdmUgdXBkYXRlIGRhdGEgZnJvbSB0aGUgc2VydmVyXHJcbiAgICB2YXIgcmVjZWl2ZVVwZGF0ZURhdGEgPSBmdW5jdGlvbiAoanNvblN0cmluZylcclxuICAgIHtcclxuICAgICAgICB2YXIgdXBkYXRlRGF0YTtcclxuICAgICAgICBcclxuICAgICAgICAvLyByZXBvcnRFcnJvcihcInJlY2lldmVVcGRhdGVEYXRhIGNhbGxlZC5cIiArIFwiPGJyPlR5cGU6IFwiICsgdHlwZW9mIGpzb25TdHJpbmcpOyAvL2RlYnVnIGhvb2tcclxuICAgICAgICB0cnlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIC8vIHBhcnNlIHRoZSBKU09OIHN0cmluZyBmcm9tIHRoZSBzZXJ2ZXIgaW50byBhIEpTT04gb2JqZWN0XHJcbiAgICAgICAgICAgIHVwZGF0ZURhdGEgPSBqUXVlcnkucGFyc2VKU09OKGpzb25TdHJpbmcpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoZXJyb3IpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXBvcnRFcnJvcihcInJlY2lldmVVcGRhdGVEYXRhIGZhaWxlZC4gXCIgKyBcIjxicj5FcnJvciBuYW1lOiBcIiArIGVycm9yLm5hbWUgKyBcIjxicj5FcnJvciBNZXNzYWdlOiBcIiArIGVycm9yLm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyByZXBvcnRFcnJvcihcInJlY2lldmVVcGRhdGVEYXRhIHBhc3NlZCB0cnljYXRjaCBibG9jay5cIik7IC8vZGVidWcgaG9va1xyXG4gICAgICAgIFxyXG4gICAgICAgIGlmICghdXBkYXRlRGF0YS5oYXNPd25Qcm9wZXJ0eSgnZGF0YScpKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKF9kYXRhICYmIF9kYXRhLmhhc093blByb3BlcnR5KCdkYXRhJykpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHVwZGF0ZURhdGFbJ2RhdGEnXSA9IF9kYXRhWydkYXRhJ107XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB1cGRhdGVEYXRhWydkYXRhJ10gPSB7fTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICBpZiAoX2lzSW5pdGlhbGlzZWQpIC8vIGFsbCB0ZW1wbGF0ZXMgaGF2ZSBiZWVuIHJlZ2lzdGVyZWQsIHNvIHJlbmRlciB0aGVtXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBkb1VwZGF0ZSh1cGRhdGVEYXRhKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgX2RhdGEgPSB1cGRhdGVEYXRhOyAvLyBhbGwgdGVtcGxhdGVzIGhhdmUgbm90IGJlZW4gcmVnaXN0ZXJlZC4gV2Ugc2V0IF9kYXRhIGRpcmVjdGx5IGhlcmUgd2hpY2ggd2lsbCBiZSBhcHBsaWVkIGFmdGVyIHRoZSB0ZW1wbGF0ZSBpcyBsb2FkZWQgd2l0aCB0aGUgaW5pdGlhbCBkYXRhXHJcbiAgICAgICAgfSAgIFxyXG4gICAgfTtcclxuXHJcbiAgICAvLyBUaGlzIGZ1bmN0aW9uIGRvZXMgdGhlIHVwZGF0ZSBieSBjYWxsaW5nIHRoZSBtZXRob2RzIG9uIHRoZSBjdXJyZW50IHN0YXRlXHJcbiAgICB2YXIgZG9VcGRhdGUgPSBmdW5jdGlvbiAoZGF0YSlcclxuICAgIHtcclxuICAgICAgICBpZiAoX2N1cnJlbnRTdGF0ZSA9PSBudWxsKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZGF0YSA9IF9jdXJyZW50U3RhdGUub25CZWZvcmVVcGRhdGUoZGF0YSk7XHJcblxyXG4gICAgICAgIGlmIChkYXRhID09PSBmYWxzZSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJlcG9ydEVycm9yKCdkYXRhIGlzIGZhbHNlLCByZXR1cm4nKTtcclxuICAgICAgICAgICAgcmV0dXJuOyAvLyBBIGJlZm9yZVVwZGF0ZUNhbGxiYWNrIHJldHVybmVkIGEgZmFsc2UgdmFsdWUsIHRoaXMgcHJldmVudHMgdGhlIHJlbmRlciBmcm9tIG9jY3VyaW5nXHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIF9kYXRhID0gZGF0YTtcclxuXHJcbiAgICAgICAgX2N1cnJlbnRTdGF0ZS5vblVwZGF0ZShfZGF0YSk7XHJcblxyXG4gICAgICAgIF9jdXJyZW50U3RhdGUub25BZnRlclVwZGF0ZShfZGF0YSk7XHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICAvLyBFeGVjdXRlIGFsbCBjYWxsYmFja3MgaW4gdGhlIGNhbGxiYWNrcyBhcnJheS9vYmplY3QgcHJvdmlkZWQsIHVwZGF0ZURhdGEgaXMgcGFzc2VkIHRvIHRoZW0gZm9yIHByb2Nlc3NpbmcgYW5kIHBvdGVudGlhbCBtb2RpZmljYXRpb25cclxuICAgIHZhciBleGVjdXRlQ2FsbGJhY2tzID0gZnVuY3Rpb24gKGNhbGxiYWNrcywgZGF0YSlcclxuICAgIHsgICBcclxuICAgICAgICBmb3IgKHZhciBrZXkgaW4gY2FsbGJhY2tzKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKGNhbGxiYWNrcy5oYXNPd25Qcm9wZXJ0eShrZXkpICYmIGpRdWVyeS5pc0Z1bmN0aW9uKGNhbGxiYWNrc1trZXldKSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZGF0YSA9IGNhbGxiYWNrc1trZXldLmNhbGwodGhpcywgZGF0YSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgcmV0dXJuIGRhdGE7XHJcbiAgICB9O1xyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgaW5pdDogZnVuY3Rpb24gKCkgXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpbml0KCk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICByZWNlaXZlVXBkYXRlRGF0YTogZnVuY3Rpb24gKGpzb25TdHJpbmcpIFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmVjZWl2ZVVwZGF0ZURhdGEoanNvblN0cmluZyk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBhZGRCZWZvcmVVcGRhdGVDYWxsYmFjazogZnVuY3Rpb24gKGtleSwgY2FsbGJhY2tGdW5jdGlvbilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIF9iZWZvcmVVcGRhdGVDYWxsYmFja3Nba2V5XSA9IGNhbGxiYWNrRnVuY3Rpb247XHJcbiAgICAgICAgfSxcclxuICAgICAgICBhZGRCZWZvcmVVcGRhdGVDYWxsYmFja3M6IGZ1bmN0aW9uIChjYWxsYmFja3MpIHsgICAgICAgIFxyXG4gICAgICAgICAgICBmb3IgKHZhciBjYWxsYmFja0tleSBpbiBjYWxsYmFja3MpIHtcclxuICAgICAgICAgICAgICAgIGlmICghY2FsbGJhY2tzLmhhc093blByb3BlcnR5KGNhbGxiYWNrS2V5KSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIE5hbm9TdGF0ZU1hbmFnZXIuYWRkQmVmb3JlVXBkYXRlQ2FsbGJhY2soY2FsbGJhY2tLZXksIGNhbGxiYWNrc1tjYWxsYmFja0tleV0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICByZW1vdmVCZWZvcmVVcGRhdGVDYWxsYmFjazogZnVuY3Rpb24gKGtleSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChfYmVmb3JlVXBkYXRlQ2FsbGJhY2tzLmhhc093blByb3BlcnR5KGtleSkpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGRlbGV0ZSBfYmVmb3JlVXBkYXRlQ2FsbGJhY2tzW2tleV07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIGV4ZWN1dGVCZWZvcmVVcGRhdGVDYWxsYmFja3M6IGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBleGVjdXRlQ2FsbGJhY2tzKF9iZWZvcmVVcGRhdGVDYWxsYmFja3MsIGRhdGEpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgYWRkQWZ0ZXJVcGRhdGVDYWxsYmFjazogZnVuY3Rpb24gKGtleSwgY2FsbGJhY2tGdW5jdGlvbilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIF9hZnRlclVwZGF0ZUNhbGxiYWNrc1trZXldID0gY2FsbGJhY2tGdW5jdGlvbjtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGFkZEFmdGVyVXBkYXRlQ2FsbGJhY2tzOiBmdW5jdGlvbiAoY2FsbGJhY2tzKSB7ICAgICBcclxuICAgICAgICAgICAgZm9yICh2YXIgY2FsbGJhY2tLZXkgaW4gY2FsbGJhY2tzKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWNhbGxiYWNrcy5oYXNPd25Qcm9wZXJ0eShjYWxsYmFja0tleSkpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBOYW5vU3RhdGVNYW5hZ2VyLmFkZEFmdGVyVXBkYXRlQ2FsbGJhY2soY2FsbGJhY2tLZXksIGNhbGxiYWNrc1tjYWxsYmFja0tleV0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICByZW1vdmVBZnRlclVwZGF0ZUNhbGxiYWNrOiBmdW5jdGlvbiAoa2V5KVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKF9hZnRlclVwZGF0ZUNhbGxiYWNrcy5oYXNPd25Qcm9wZXJ0eShrZXkpKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBkZWxldGUgX2FmdGVyVXBkYXRlQ2FsbGJhY2tzW2tleV07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIGV4ZWN1dGVBZnRlclVwZGF0ZUNhbGxiYWNrczogZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGV4ZWN1dGVDYWxsYmFja3MoX2FmdGVyVXBkYXRlQ2FsbGJhY2tzLCBkYXRhKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGFkZFN0YXRlOiBmdW5jdGlvbiAoc3RhdGUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZiAoIShzdGF0ZSBpbnN0YW5jZW9mIE5hbm9TdGF0ZUNsYXNzKSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmVwb3J0RXJyb3IoJ0VSUk9SOiBBdHRlbXB0ZWQgdG8gYWRkIGEgc3RhdGUgd2hpY2ggaXMgbm90IGluc3RhbmNlb2YgTmFub1N0YXRlQ2xhc3MnKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoIXN0YXRlLmtleSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmVwb3J0RXJyb3IoJ0VSUk9SOiBBdHRlbXB0ZWQgdG8gYWRkIGEgc3RhdGUgd2l0aCBhbiBpbnZhbGlkIHN0YXRlS2V5Jyk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgX3N0YXRlc1tzdGF0ZS5rZXldID0gc3RhdGU7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBzZXRDdXJyZW50U3RhdGU6IGZ1bmN0aW9uIChzdGF0ZUtleSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2Ygc3RhdGVLZXkgPT0gJ3VuZGVmaW5lZCcgfHwgIXN0YXRlS2V5KSB7XHJcbiAgICAgICAgICAgICAgICByZXBvcnRFcnJvcignRVJST1I6IE5vIHN0YXRlIGtleSB3YXMgcGFzc2VkIScpOyAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICghX3N0YXRlcy5oYXNPd25Qcm9wZXJ0eShzdGF0ZUtleSkpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJlcG9ydEVycm9yKCdFUlJPUjogQXR0ZW1wdGVkIHRvIHNldCBhIGN1cnJlbnQgc3RhdGUgd2hpY2ggZG9lcyBub3QgZXhpc3Q6ICcgKyBzdGF0ZUtleSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH0gICAgICAgICAgIFxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgdmFyIHByZXZpb3VzU3RhdGUgPSBfY3VycmVudFN0YXRlO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgX2N1cnJlbnRTdGF0ZSA9IF9zdGF0ZXNbc3RhdGVLZXldO1xyXG5cclxuICAgICAgICAgICAgaWYgKHByZXZpb3VzU3RhdGUgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgcHJldmlvdXNTdGF0ZS5vblJlbW92ZShfY3VycmVudFN0YXRlKTtcclxuICAgICAgICAgICAgfSAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgX2N1cnJlbnRTdGF0ZS5vbkFkZChwcmV2aW91c1N0YXRlKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZ2V0Q3VycmVudFN0YXRlOiBmdW5jdGlvbiAoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIF9jdXJyZW50U3RhdGU7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBnZXREYXRhOiBmdW5jdGlvbiAoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgcmV0dXJuIF9kYXRhO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbn0gKCk7XHJcbiBcbi8vIE5hbm9CYXNlQ2FsbGJhY2tzIGlzIHdoZXJlIHRoZSBiYXNlIGNhbGxiYWNrcyAoY29tbW9uIHRvIGFsbCB0ZW1wbGF0ZXMpIGFyZSBzdG9yZWRcclxuTmFub0Jhc2VDYWxsYmFja3MgPSBmdW5jdGlvbiAoKVxyXG57XHJcbiAgICAvLyBfY2FuQ2xpY2sgaXMgdXNlZCB0byBkaXNhYmxlIGNsaWNrcyBmb3IgYSBzaG9ydCBwZXJpb2QgYWZ0ZXIgZWFjaCBjbGljayAodG8gYXZvaWQgbWlzLWNsaWNrcylcclxuICAgIHZhciBfY2FuQ2xpY2sgPSB0cnVlO1xyXG4gICAgdmFyIF9iYXNlQmVmb3JlVXBkYXRlQ2FsbGJhY2tzID0ge307XHJcbiAgICB2YXIgX2Jhc2VBZnRlclVwZGF0ZUNhbGxiYWNrcyA9IHtcclxuICAgICAgICAvLyB0aGlzIGNhbGxiYWNrIGlzIHRyaWdnZXJlZCBhZnRlciBuZXcgZGF0YSBpcyBwcm9jZXNzZWRcclxuICAgICAgICAvLyBpdCB1cGRhdGVzIHRoZSBzdGF0dXMvdmlzaWJpbGl0eSBpY29uIGFuZCBhZGRzIGNsaWNrIGV2ZW50IGhhbmRsaW5nIHRvIGJ1dHRvbnMvbGlua3MgICAgIFxyXG4gICAgICAgIHN0YXR1czogZnVuY3Rpb24gKHVwZGF0ZURhdGEpIHtcclxuICAgICAgICAgICAgdmFyIHVpU3RhdHVzQ2xhc3M7XHJcbiAgICAgICAgICAgIGlmICh1cGRhdGVEYXRhWydjb25maWcnXVsnc3RhdHVzJ10gPT0gMilcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdWlTdGF0dXNDbGFzcyA9ICdnb29kJztcclxuICAgICAgICAgICAgICAgICQoJy5saW5rQWN0aXZlJykucmVtb3ZlQ2xhc3MoJ2luYWN0aXZlJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAodXBkYXRlRGF0YVsnY29uZmlnJ11bJ3N0YXR1cyddID09IDEpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHVpU3RhdHVzQ2xhc3MgPSAnYXZlcmFnZSc7XHJcbiAgICAgICAgICAgICAgICAkKCcubGlua0FjdGl2ZScpLmFkZENsYXNzKCdpbmFjdGl2ZScpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdWlTdGF0dXNDbGFzcyA9ICdiYWQnO1xyXG4gICAgICAgICAgICAgICAgJCgnLmxpbmtBY3RpdmUnKS5hZGRDbGFzcygnaW5hY3RpdmUnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAkKCcuc3RhdHVzaWNvbicpLnJlbW92ZUNsYXNzKFwiZ29vZCBiYWQgYXZlcmFnZVwiKS5hZGRDbGFzcyh1aVN0YXR1c0NsYXNzKTtcclxuICAgICAgICAgICAgJCgnLmxpbmtBY3RpdmUnKS5zdG9wVGltZSgnbGlua1BlbmRpbmcnKTtcclxuICAgICAgICAgICAgJCgnLmxpbmtBY3RpdmUnKS5yZW1vdmVDbGFzcygnbGlua1BlbmRpbmcnKTtcclxuXHJcbiAgICAgICAgICAgICQoJy5saW5rQWN0aXZlJylcclxuICAgICAgICAgICAgICAgIC5vZmYoJ2NsaWNrJylcclxuICAgICAgICAgICAgICAgIC5vbignY2xpY2snLCBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBocmVmID0gJCh0aGlzKS5kYXRhKCdocmVmJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoaHJlZiAhPSBudWxsICYmIF9jYW5DbGljaylcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9jYW5DbGljayA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKCdib2R5Jykub25lVGltZSgzMDAsICdlbmFibGVDbGljaycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jYW5DbGljayA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodXBkYXRlRGF0YVsnY29uZmlnJ11bJ3N0YXR1cyddID09IDIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcykub25lVGltZSgzMDAsICdsaW5rUGVuZGluZycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmFkZENsYXNzKCdsaW5rUGVuZGluZycpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBocmVmO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHVwZGF0ZURhdGE7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBuYW5vbWFwOiBmdW5jdGlvbiAodXBkYXRlRGF0YSkge1xyXG4gICAgICAgICAgICAkKCcubWFwSWNvbicpXHJcbiAgICAgICAgICAgICAgICAub2ZmKCdtb3VzZWVudGVyIG1vdXNlbGVhdmUnKVxyXG4gICAgICAgICAgICAgICAgLm9uKCdtb3VzZWVudGVyJyxcclxuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKCcjdWlNYXBUb29sdGlwJylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5odG1sKCQodGhpcykuY2hpbGRyZW4oJy50b29sdGlwJykuaHRtbCgpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnNob3coKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnN0b3BUaW1lKClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5vbmVUaW1lKDUwMDAsICdoaWRlVG9vbHRpcCcsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmZhZGVPdXQoNTAwKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICk7XHJcblxyXG4gICAgICAgICAgICAkKCcuem9vbUxpbmsnKVxyXG4gICAgICAgICAgICAgICAgLm9mZignY2xpY2snKVxyXG4gICAgICAgICAgICAgICAgLm9uKCdjbGljaycsIGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHpvb21MZXZlbCA9ICQodGhpcykuZGF0YSgnem9vbUxldmVsJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHVpTWFwT2JqZWN0ID0gJCgnI3VpTWFwJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHVpTWFwV2lkdGggPSB1aU1hcE9iamVjdC53aWR0aCgpICogem9vbUxldmVsO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB1aU1hcEhlaWdodCA9IHVpTWFwT2JqZWN0LmhlaWdodCgpICogem9vbUxldmVsO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB1aU1hcE9iamVjdC5jc3Moe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB6b29tOiB6b29tTGV2ZWwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxlZnQ6ICc1MCUnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0b3A6ICc1MCUnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXJnaW5MZWZ0OiAnLScgKyBNYXRoLmZsb29yKHVpTWFwV2lkdGggLyAyKSArICdweCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hcmdpblRvcDogJy0nICsgTWF0aC5mbG9vcih1aU1hcEhlaWdodCAvIDIpICsgJ3B4J1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAkKCcjdWlNYXBJbWFnZScpLmF0dHIoJ3NyYycsdXBkYXRlRGF0YVsnY29uZmlnJ11bJ21hcCddICsgJ19uYW5vbWFwX3onICsgdXBkYXRlRGF0YVsnY29uZmlnJ11bJ21hcFpMZXZlbCddICsgJy5wbmcnKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB1cGRhdGVEYXRhO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBhZGRDYWxsYmFja3M6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgTmFub1N0YXRlTWFuYWdlci5hZGRCZWZvcmVVcGRhdGVDYWxsYmFja3MoX2Jhc2VCZWZvcmVVcGRhdGVDYWxsYmFja3MpO1xyXG4gICAgICAgICAgICBOYW5vU3RhdGVNYW5hZ2VyLmFkZEFmdGVyVXBkYXRlQ2FsbGJhY2tzKF9iYXNlQWZ0ZXJVcGRhdGVDYWxsYmFja3MpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgcmVtb3ZlQ2FsbGJhY2tzOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGNhbGxiYWNrS2V5IGluIF9iYXNlQmVmb3JlVXBkYXRlQ2FsbGJhY2tzKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoX2Jhc2VCZWZvcmVVcGRhdGVDYWxsYmFja3MuaGFzT3duUHJvcGVydHkoY2FsbGJhY2tLZXkpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgTmFub1N0YXRlTWFuYWdlci5yZW1vdmVCZWZvcmVVcGRhdGVDYWxsYmFjayhjYWxsYmFja0tleSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZm9yICh2YXIgY2FsbGJhY2tLZXkgaW4gX2Jhc2VBZnRlclVwZGF0ZUNhbGxiYWNrcykge1xyXG4gICAgICAgICAgICAgICAgaWYgKF9iYXNlQWZ0ZXJVcGRhdGVDYWxsYmFja3MuaGFzT3duUHJvcGVydHkoY2FsbGJhY2tLZXkpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgTmFub1N0YXRlTWFuYWdlci5yZW1vdmVBZnRlclVwZGF0ZUNhbGxiYWNrKGNhbGxiYWNrS2V5KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH07XHJcbn0oKTtcclxuXG4vLyBOYW5vQmFzZUhlbHBlcnMgaXMgd2hlcmUgdGhlIGJhc2UgdGVtcGxhdGUgaGVscGVycyAoY29tbW9uIHRvIGFsbCB0ZW1wbGF0ZXMpIGFyZSBzdG9yZWRcclxuTmFub0Jhc2VIZWxwZXJzID0gZnVuY3Rpb24gKClcclxue1xyXG4gICAgdmFyIF9iYXNlSGVscGVycyA9IHtcclxuICAgICAgICAgICAgLy8gY2hhbmdlIHVpIHN0eWxpbmcgdG8gXCJzeW5kaWNhdGUgbW9kZVwiXHJcbiAgICAgICAgICAgIHN5bmRpY2F0ZU1vZGU6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgJCgnYm9keScpLmNzcyhcImJhY2tncm91bmQtY29sb3JcIixcIiM4ZjE0MTRcIik7XHJcbiAgICAgICAgICAgICAgICAkKCdib2R5JykuY3NzKFwiYmFja2dyb3VuZC1pbWFnZVwiLFwidXJsKCd1aUJhY2tncm91bmQtU3luZGljYXRlLnBuZycpXCIpO1xyXG4gICAgICAgICAgICAgICAgJCgnYm9keScpLmNzcyhcImJhY2tncm91bmQtcG9zaXRpb25cIixcIjUwJSAwXCIpO1xyXG4gICAgICAgICAgICAgICAgJCgnYm9keScpLmNzcyhcImJhY2tncm91bmQtcmVwZWF0XCIsXCJyZXBlYXQteFwiKTtcclxuXHJcbiAgICAgICAgICAgICAgICAkKCcjdWlUaXRsZUZsdWZmJykuY3NzKFwiYmFja2dyb3VuZC1pbWFnZVwiLFwidXJsKCd1aVRpdGxlRmx1ZmYtU3luZGljYXRlLnBuZycpXCIpO1xyXG4gICAgICAgICAgICAgICAgJCgnI3VpVGl0bGVGbHVmZicpLmNzcyhcImJhY2tncm91bmQtcG9zaXRpb25cIixcIjUwJSA1MCVcIik7XHJcbiAgICAgICAgICAgICAgICAkKCcjdWlUaXRsZUZsdWZmJykuY3NzKFwiYmFja2dyb3VuZC1yZXBlYXRcIiwgXCJuby1yZXBlYXRcIik7XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuICcnO1xyXG4gICAgICAgICAgICB9LFxyXG5cclxuICAgICAgICAgICAgY29tYmluZTogZnVuY3Rpb24oIGFycjEsIGFycjIgKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gYXJyMSAmJiBhcnIyID8gYXJyMS5jb25jYXQoYXJyMikgOiBhcnIxIHx8IGFycjI7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGR1bXA6IGZ1bmN0aW9uKCBhcnIxICkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KGFycjEpO1xyXG4gICAgICAgICAgICB9LFxyXG5cclxuICAgICAgICAgICAgLy8gR2VuZXJhdGUgYSBCeW9uZCBsaW5rXHJcbiAgICAgICAgICAgIGxpbms6IGZ1bmN0aW9uKCB0ZXh0LCBpY29uLCBwYXJhbWV0ZXJzLCBzdGF0dXMsIGVsZW1lbnRDbGFzcywgZWxlbWVudElkICkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGljb25IdG1sID0gJyc7XHJcbiAgICAgICAgICAgICAgICB2YXIgaWNvbkNsYXNzID0gJ25vSWNvbic7XHJcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGljb24gIT0gJ3VuZGVmaW5lZCcgJiYgaWNvbilcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpY29uSHRtbCA9ICc8ZGl2IGNsYXNzPVwidWlMaW5rUGVuZGluZ0ljb25cIj48L2Rpdj48aSBjbGFzcz1cImZhIGZhLWZ3IGZhLScgKyBpY29uICsgJ1wiPjwvaT4nO1xyXG4gICAgICAgICAgICAgICAgICAgIGljb25DbGFzcyA9ICdoYXNJY29uJztcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGVsZW1lbnRDbGFzcyA9PSAndW5kZWZpbmVkJyB8fCAhZWxlbWVudENsYXNzKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnRDbGFzcyA9ICdsaW5rJztcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgZWxlbWVudElkSHRtbCA9ICcnO1xyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBlbGVtZW50SWQgIT0gJ3VuZGVmaW5lZCcgJiYgZWxlbWVudElkKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnRJZEh0bWwgPSAnaWQ9XCInICsgZWxlbWVudElkICsgJ1wiJztcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgdGlkID0gTmFub1RyYW5zaXRpb24uYWxsb2NJRChlbGVtZW50SWRIdG1sICsgXCJfXCIgKyB0ZXh0LnRvU3RyaW5nKCkucmVwbGFjZSgvW15hLXowLTlfXS9naSwgXCJfXCIpICsgXCJfXCIgKyBpY29uKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHN0YXR1cyAhPSAndW5kZWZpbmVkJyAmJiBzdGF0dXMpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICc8ZGl2IHVuc2VsZWN0YWJsZT1cIm9uXCIgY2xhc3M9XCJsaW5rICcgKyBpY29uQ2xhc3MgKyAnICcgKyB0aWQgKyAnXCIgJyArIGVsZW1lbnRJZEh0bWwgKyAnPicgKyBpY29uSHRtbCArIHRleHQgKyAnPC9kaXY+PHNjcmlwdD4kKGZ1bmN0aW9uKCkgeyB2YXIgbmV3U3RhdGUgPSB7XCIuLmNsYXNzXCI6IFwiJyArIGVsZW1lbnRDbGFzcyArICcgJyArIHN0YXR1cyArICdcIn07IHZhciBvbGQgPSBOYW5vVHJhbnNpdGlvbi50cmFuc2l0aW9uRWxlbWVudChcIicgKyB0aWQgKyAnXCIsIG51bGwsIG5ld1N0YXRlLCAyMDApOyBOYW5vVHJhbnNpdGlvbi5hbmltYXRlSG92ZXIoXCInICsgdGlkICsgJ1wiLCBudWxsLCBvbGQsIG5ld1N0YXRlKTsgfSk7PC9zY3JpcHQ+JztcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gJzxkaXYgdW5zZWxlY3RhYmxlPVwib25cIiBjbGFzcz1cImxpbmtBY3RpdmUgJyArIGljb25DbGFzcyArICcgJyArIHRpZCArICdcIiBkYXRhLWhyZWY9XCInICsgTmFub1V0aWxpdHkuZ2VuZXJhdGVIcmVmKHBhcmFtZXRlcnMpICsgJ1wiICcgKyBlbGVtZW50SWRIdG1sICsgJz4nICsgaWNvbkh0bWwgKyB0ZXh0ICsgJzwvZGl2PjxzY3JpcHQ+JChmdW5jdGlvbigpIHsgdmFyIG5ld1N0YXRlID0ge1wiLi5jbGFzc1wiOiBcIicgKyBlbGVtZW50Q2xhc3MgKyAnXCJ9OyB2YXIgb2xkID0gTmFub1RyYW5zaXRpb24udHJhbnNpdGlvbkVsZW1lbnQoXCInICsgdGlkICsgJ1wiLCBudWxsLCBuZXdTdGF0ZSwgMjAwKTsgTmFub1RyYW5zaXRpb24uYW5pbWF0ZUhvdmVyKFwiJyArIHRpZCArICdcIiwgbnVsbCwgb2xkLCBuZXdTdGF0ZSk7IH0pOzwvc2NyaXB0Pic7XHJcbiAgICAgICAgICAgIH0sXHJcblxyXG4gICAgICAgICAgICB4b3I6IGZ1bmN0aW9uIChudW1iZXIsYml0KSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVtYmVyIF4gYml0O1xyXG4gICAgICAgICAgICB9LFxyXG5cclxuICAgICAgICAgICAgcHJlY2lzaW9uUm91bmQ6IGZ1bmN0aW9uICh2YWx1ZSwgcGxhY2VzKSB7XHJcbiAgICAgICAgICAgICAgICBpZihwbGFjZXMgPT0gMCl7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIE1hdGgucm91bmQobnVtYmVyKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHZhciBtdWx0aXBsaWVyID0gTWF0aC5wb3coMTAsIHBsYWNlcyk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gKE1hdGgucm91bmQodmFsdWUgKiBtdWx0aXBsaWVyKSAvIG11bHRpcGxpZXIpO1xyXG4gICAgICAgICAgICB9LFxyXG5cclxuICAgICAgICAgICAgLy8gUm91bmQgYSBudW1iZXIgdG8gdGhlIG5lYXJlc3QgaW50ZWdlclxyXG4gICAgICAgICAgICByb3VuZDogZnVuY3Rpb24obnVtYmVyKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gTWF0aC5yb3VuZChudW1iZXIpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBmaXhlZDogZnVuY3Rpb24obnVtYmVyKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gTWF0aC5yb3VuZChudW1iZXIgKiAxMCkgLyAxMDtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgLy8gUm91bmQgYSBudW1iZXIgZG93biB0byBpbnRlZ2VyXHJcbiAgICAgICAgICAgIGZsb29yOiBmdW5jdGlvbihudW1iZXIpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBNYXRoLmZsb29yKG51bWJlcik7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIC8vIFJvdW5kIGEgbnVtYmVyIHVwIHRvIGludGVnZXJcclxuICAgICAgICAgICAgY2VpbDogZnVuY3Rpb24obnVtYmVyKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gTWF0aC5jZWlsKG51bWJlcik7XHJcbiAgICAgICAgICAgIH0sXHJcblxyXG4gICAgICAgICAgICAvLyBGb3JtYXQgYSBzdHJpbmcgKH5zdHJpbmcoXCJIZWxsbyB7MH0sIGhvdyBhcmUgezF9P1wiLCAnTWFydGluJywgJ3lvdScpIGJlY29tZXMgXCJIZWxsbyBNYXJ0aW4sIGhvdyBhcmUgeW91P1wiKVxyXG4gICAgICAgICAgICBzdHJpbmc6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT0gMClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJyc7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmIChhcmd1bWVudHMubGVuZ3RoID09IDEpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFyZ3VtZW50c1swXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAxKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHN0cmluZ0FyZ3MgPSBbXTtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKylcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0cmluZ0FyZ3MucHVzaChhcmd1bWVudHNbaV0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYXJndW1lbnRzWzBdLmZvcm1hdChzdHJpbmdBcmdzKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiAnJztcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZm9ybWF0TnVtYmVyOiBmdW5jdGlvbih4KSB7XHJcbiAgICAgICAgICAgICAgICAvLyBGcm9tIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvMjkwMTEwMi9ob3ctdG8tcHJpbnQtYS1udW1iZXItd2l0aC1jb21tYXMtYXMtdGhvdXNhbmRzLXNlcGFyYXRvcnMtaW4tamF2YXNjcmlwdFxyXG4gICAgICAgICAgICAgICAgdmFyIHBhcnRzID0geC50b1N0cmluZygpLnNwbGl0KFwiLlwiKTtcclxuICAgICAgICAgICAgICAgIHBhcnRzWzBdID0gcGFydHNbMF0ucmVwbGFjZSgvXFxCKD89KFxcZHszfSkrKD8hXFxkKSkvZywgXCIsXCIpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHBhcnRzLmpvaW4oXCIuXCIpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAvLyBDYXBpdGFsaXplIHRoZSBmaXJzdCBsZXR0ZXIgb2YgYSBzdHJpbmcuIEZyb20gaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy8xMDI2MDY5L2NhcGl0YWxpemUtdGhlLWZpcnN0LWxldHRlci1vZi1zdHJpbmctaW4tamF2YXNjcmlwdFxyXG4gICAgICAgICAgICBjYXBpdGFsaXplRmlyc3RMZXR0ZXI6IGZ1bmN0aW9uKCBzdHJpbmcgKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gc3RyaW5nLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgc3RyaW5nLnNsaWNlKDEpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAvLyBEaXNwbGF5IGEgYmFyLiBVc2VkIHRvIHNob3cgaGVhbHRoLCBjYXBhY2l0eSwgZXRjLlxyXG4gICAgICAgICAgICBkaXNwbGF5QmFyOiBmdW5jdGlvbiggdmFsdWUsIHJhbmdlTWluLCByYW5nZU1heCwgc3R5bGVDbGFzcywgc2hvd1RleHQgKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHJhbmdlTWluIDwgcmFuZ2VNYXgpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlIDwgcmFuZ2VNaW4pXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IHJhbmdlTWluO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICh2YWx1ZSA+IHJhbmdlTWF4KVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSByYW5nZU1heDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlID4gcmFuZ2VNaW4pXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IHJhbmdlTWluO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICh2YWx1ZSA8IHJhbmdlTWF4KVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSByYW5nZU1heDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBzdHlsZUNsYXNzID09ICd1bmRlZmluZWQnIHx8ICFzdHlsZUNsYXNzKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHN0eWxlQ2xhc3MgPSAnJztcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHNob3dUZXh0ID09ICd1bmRlZmluZWQnIHx8ICFzaG93VGV4dClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBzaG93VGV4dCA9ICcnO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHZhciBwZXJjZW50YWdlID0gTWF0aC5yb3VuZCgodmFsdWUgLSByYW5nZU1pbikgLyAocmFuZ2VNYXggLSByYW5nZU1pbikgKiAxMDApO1xyXG4gICAgICAgICAgICAgICAgdmFyIHRpZCA9IE5hbm9UcmFuc2l0aW9uLmFsbG9jSUQocmFuZ2VNaW4gKyBcIl9cIiArIHJhbmdlTWF4KTtcclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gJzxkaXYgY2xhc3M9XCJkaXNwbGF5QmFyICcgKyB0aWQgKyAnICcgKyBzdHlsZUNsYXNzICsgJ1wiPjxkaXYgY2xhc3M9XCJkaXNwbGF5QmFyRmlsbFwiPjwvZGl2PjxkaXYgY2xhc3M9XCJkaXNwbGF5QmFyVGV4dCAnICsgc3R5bGVDbGFzcyArICdcIj4nICsgc2hvd1RleHQgKyAnPC9kaXY+PC9kaXY+PHNjcmlwdD4kKGZ1bmN0aW9uKCkgeyBOYW5vVHJhbnNpdGlvbi50cmFuc2l0aW9uRWxlbWVudChcIicgKyB0aWQgKyAnXCIsIFwiLmRpc3BsYXlCYXJGaWxsXCIsIHt3aWR0aDogXCInICsgcGVyY2VudGFnZSArICclXCIsIFwiLi5jbGFzc1wiOiBcIicgKyBzdHlsZUNsYXNzICsgJ1wifSk7IH0pOzwvc2NyaXB0Pic7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIC8vIENvbnZlcnQgZGFuZ2VyIGxldmVsIHRvIGNsYXNzIChmb3IgdGhlIGFpciBhbGFybSlcclxuICAgICAgICAgICAgZGFuZ2VyVG9DbGFzczogZnVuY3Rpb24obGV2ZWwpIHtcclxuICAgICAgICAgICAgICAgIGlmKGxldmVsID09IDApIHJldHVybiAnZ29vZCc7XHJcbiAgICAgICAgICAgICAgICBpZihsZXZlbCA9PSAxKSByZXR1cm4gJ2F2ZXJhZ2UnO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuICdiYWQnO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBkYW5nZXJUb1NwYW46IGZ1bmN0aW9uKGxldmVsKSB7XHJcbiAgICAgICAgICAgICAgICBpZihsZXZlbCA9PSAwKSByZXR1cm4gJ1wiPHNwYW4gY2xhc3M9XCJnb29kXCI+R29vZDwvc3Bhbj5cIic7XHJcbiAgICAgICAgICAgICAgICBpZihsZXZlbCA9PSAxKSByZXR1cm4gJ1wiPHNwYW4gY2xhc3M9XCJhdmVyYWdlXCI+TWlub3IgQWxlcnQ8L3NwYW4+XCInO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuICdcIjxzcGFuIGNsYXNzPVwiYmFkXCI+TWFqb3IgQWxlcnQ8L3NwYW4+XCInO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBnZW5lcmF0ZUhyZWY6IGZ1bmN0aW9uIChwYXJhbWV0ZXJzKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgYm9keSA9ICQoJ2JvZHknKTsgLy8gRm9yIHNvbWUgZnVja2luZyByZWFzb24sIGRhdGEgaXMgc3RvcmVkIGluIHRoZSBib2R5IHRhZy5cclxuICAgICAgICAgICAgICAgIF91cmxQYXJhbWV0ZXJzID0gYm9keS5kYXRhKCd1cmxQYXJhbWV0ZXJzJyk7XHJcbiAgICAgICAgICAgICAgICB2YXIgcXVlcnlTdHJpbmcgPSAnPyc7XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIga2V5IGluIF91cmxQYXJhbWV0ZXJzKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChfdXJsUGFyYW1ldGVycy5oYXNPd25Qcm9wZXJ0eShrZXkpKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHF1ZXJ5U3RyaW5nICE9PSAnPycpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXJ5U3RyaW5nICs9ICc7JztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBxdWVyeVN0cmluZyArPSBrZXkgKyAnPScgKyBfdXJsUGFyYW1ldGVyc1trZXldO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBrZXkgaW4gcGFyYW1ldGVycylcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocGFyYW1ldGVycy5oYXNPd25Qcm9wZXJ0eShrZXkpKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHF1ZXJ5U3RyaW5nICE9PSAnPycpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXJ5U3RyaW5nICs9ICc7JztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBxdWVyeVN0cmluZyArPSBrZXkgKyAnPScgKyBwYXJhbWV0ZXJzW2tleV07XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHF1ZXJ5U3RyaW5nO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAvLyBEaXNwbGF5IEROQSBCbG9ja3MgKGZvciB0aGUgRE5BIE1vZGlmaWVyIFVJKVxyXG4gICAgICAgICAgICBkaXNwbGF5RE5BQmxvY2tzOiBmdW5jdGlvbihkbmFTdHJpbmcsIHNlbGVjdGVkQmxvY2ssIHNlbGVjdGVkU3ViYmxvY2ssIGJsb2NrU2l6ZSwgcGFyYW1LZXkpIHtcclxuICAgICAgICAgICAgICAgIGlmICghZG5hU3RyaW5nKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAnPGRpdiBjbGFzcz1cIm5vdGljZVwiPlBsZWFzZSBwbGFjZSBhIHZhbGlkIHN1YmplY3QgaW50byB0aGUgRE5BIG1vZGlmaWVyLjwvZGl2Pic7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGNoYXJhY3RlcnMgPSBkbmFTdHJpbmcuc3BsaXQoJycpO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBodG1sID0gJzxkaXYgY2xhc3M9XCJkbmFCbG9ja1wiPjxkaXYgY2xhc3M9XCJsaW5rIGRuYUJsb2NrTnVtYmVyXCI+MTwvZGl2Pic7XHJcbiAgICAgICAgICAgICAgICB2YXIgYmxvY2sgPSAxO1xyXG4gICAgICAgICAgICAgICAgdmFyIHN1YmJsb2NrID0gMTtcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIGluZGV4IGluIGNoYXJhY3RlcnMpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIWNoYXJhY3RlcnMuaGFzT3duUHJvcGVydHkoaW5kZXgpIHx8IHR5cGVvZiBjaGFyYWN0ZXJzW2luZGV4XSA9PT0gJ29iamVjdCcpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBwYXJhbWV0ZXJzO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChwYXJhbUtleS50b1VwcGVyQ2FzZSgpID09ICdVSScpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJhbWV0ZXJzID0geyAnc2VsZWN0VUlCbG9jaycgOiBibG9jaywgJ3NlbGVjdFVJU3ViYmxvY2snIDogc3ViYmxvY2sgfTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJhbWV0ZXJzID0geyAnc2VsZWN0U0VCbG9jaycgOiBibG9jaywgJ3NlbGVjdFNFU3ViYmxvY2snIDogc3ViYmxvY2sgfTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBzdGF0dXMgPSAnbGlua0FjdGl2ZSc7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGJsb2NrID09IHNlbGVjdGVkQmxvY2sgJiYgc3ViYmxvY2sgPT0gc2VsZWN0ZWRTdWJibG9jaykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXMgPSAnc2VsZWN0ZWQnO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaHRtbCArPSAnPGRpdiBjbGFzcz1cImxpbmsgJyArIHN0YXR1cyArICcgZG5hU3ViQmxvY2tcIiBkYXRhLWhyZWY9XCInICsgTmFub1V0aWxpdHkuZ2VuZXJhdGVIcmVmKHBhcmFtZXRlcnMpICsgJ1wiIGlkPVwiZG5hQmxvY2snICsgaW5kZXggKyAnXCI+JyArIGNoYXJhY3RlcnNbaW5kZXhdICsgJzwvZGl2Pic7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGluZGV4Kys7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGluZGV4ICUgYmxvY2tTaXplID09IDAgJiYgaW5kZXggPCBjaGFyYWN0ZXJzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBibG9jaysrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdWJibG9jayA9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGh0bWwgKz0gJzwvZGl2PjxkaXYgY2xhc3M9XCJkbmFCbG9ja1wiPjxkaXYgY2xhc3M9XCJsaW5rIGRuYUJsb2NrTnVtYmVyXCI+JyArIGJsb2NrICsgJzwvZGl2Pic7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3ViYmxvY2srKztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaHRtbCArPSAnPC9kaXY+JztcclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gaHRtbDtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgY01pcnJvcjogZnVuY3Rpb24odGV4dGJveCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGVkaXRvciA9IENvZGVNaXJyb3IuZnJvbVRleHRBcmVhKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRleHRib3gpLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGluZU51bWJlcnM6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgaW5kZW50VW5pdDogNCxcclxuICAgICAgICAgICAgICAgICAgICBpbmRlbnRXaXRoVGFiczogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICB0aGVtZTogXCJsZXNzZXItZGFya1wiXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgc21vb3RoTnVtYmVyOiBmdW5jdGlvbihudW1iZXIpIHtcclxuICAgICAgICAgICAgICAgIHZhciB0aWQgPSBOYW5vVHJhbnNpdGlvbi5hbGxvY0lEKFwiblwiKTtcclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gJzxzcGFuIGNsYXNzPVwiJyArIHRpZCArICdcIj48L3NwYW4+PHNjcmlwdD4kKGZ1bmN0aW9uKCkgeyB2YXIgbmV3U3RhdGUgPSB7dmFsdWU6ICcgKyBudW1iZXIgKyAnfTsgdmFyIG9sZCA9IE5hbm9UcmFuc2l0aW9uLnVwZGF0ZUVsZW1lbnQoXCInICsgdGlkICsgJ1wiLCBuZXdTdGF0ZSk7IE5hbm9UcmFuc2l0aW9uLmFuaW1hdGVUZXh0VmFsdWUoXCInICsgdGlkICsgJ1wiLCBudWxsLCAtMSwgb2xkW1widmFsdWVcIl0sIG5ld1N0YXRlW1widmFsdWVcIl0pOyB9KTs8L3NjcmlwdD4nO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBzbW9vdGhSb3VuZDogZnVuY3Rpb24obnVtYmVyLCBwbGFjZXMpIHtcclxuICAgICAgICAgICAgICAgIHZhciB0aWQgPSBOYW5vVHJhbnNpdGlvbi5hbGxvY0lEKHBsYWNlcyk7XHJcbiAgICAgICAgICAgICAgICBpZihwbGFjZXMgPT09IHVuZGVmaW5lZClcclxuICAgICAgICAgICAgICAgICAgICBwbGFjZWQgPSAwO1xyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiAnPHNwYW4gY2xhc3M9XCInICsgdGlkICsgJ1wiPjwvc3Bhbj48c2NyaXB0PiQoZnVuY3Rpb24oKSB7IHZhciBuZXdTdGF0ZSA9IHt2YWx1ZTogJyArIG51bWJlci50b0ZpeGVkKHBsYWNlcykgKyAnfTsgdmFyIG9sZCA9IE5hbm9UcmFuc2l0aW9uLnVwZGF0ZUVsZW1lbnQoXCInICsgdGlkICsgJ1wiLCBuZXdTdGF0ZSk7IE5hbm9UcmFuc2l0aW9uLmFuaW1hdGVUZXh0VmFsdWUoXCInICsgdGlkICsgJ1wiLCBudWxsLCAnICsgcGxhY2VzICsgJywgb2xkW1widmFsdWVcIl0sIG5ld1N0YXRlW1widmFsdWVcIl0pOyB9KTs8L3NjcmlwdD4nO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIGFkZEhlbHBlcnM6IGZ1bmN0aW9uICgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBOYW5vVGVtcGxhdGUuYWRkSGVscGVycyhfYmFzZUhlbHBlcnMpO1xyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIHJlbW92ZUhlbHBlcnM6IGZ1bmN0aW9uICgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBmb3IgKHZhciBoZWxwZXJLZXkgaW4gX2Jhc2VIZWxwZXJzKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZiAoX2Jhc2VIZWxwZXJzLmhhc093blByb3BlcnR5KGhlbHBlcktleSkpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgTmFub1RlbXBsYXRlLnJlbW92ZUhlbHBlcihoZWxwZXJLZXkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxufSgpO1xyXG5cblxyXG5OYW5vU3RhdGVEZWZhdWx0Q2xhc3MuaW5oZXJpdHNGcm9tKE5hbm9TdGF0ZUNsYXNzKTtcclxudmFyIE5hbm9TdGF0ZURlZmF1bHQgPSBuZXcgTmFub1N0YXRlRGVmYXVsdENsYXNzKCk7XHJcblxyXG5mdW5jdGlvbiBOYW5vU3RhdGVEZWZhdWx0Q2xhc3MoKSB7XHJcblxyXG4gICAgdGhpcy5rZXkgPSAnZGVmYXVsdCc7XHJcblxyXG4gICAgLy90aGlzLnBhcmVudC5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpO1xyXG5cclxuICAgIHRoaXMua2V5ID0gdGhpcy5rZXkudG9Mb3dlckNhc2UoKTtcclxuXHJcbiAgICBOYW5vU3RhdGVNYW5hZ2VyLmFkZFN0YXRlKHRoaXMpO1xyXG59XHJcblxuTmFub1N0YXRlUERBQ2xhc3MuaW5oZXJpdHNGcm9tKE5hbm9TdGF0ZUNsYXNzKTtcclxudmFyIE5hbm9TdGF0ZVBEQSA9IG5ldyBOYW5vU3RhdGVQREFDbGFzcygpO1xyXG5cclxuZnVuY3Rpb24gTmFub1N0YXRlUERBQ2xhc3MoKSB7XHJcbiAgICB0aGlzLmtleSA9ICdwZGEnO1xyXG4gICAgdGhpcy5rZXkgPSB0aGlzLmtleS50b0xvd2VyQ2FzZSgpO1xyXG5cdHRoaXMuY3VycmVudF90ZW1wbGF0ZSA9IFwiXCI7XHJcblxyXG4gICAgTmFub1N0YXRlTWFuYWdlci5hZGRTdGF0ZSh0aGlzKTtcclxufVxyXG5cdFxyXG5OYW5vU3RhdGVQREFDbGFzcy5wcm90b3R5cGUub25VcGRhdGUgPSBmdW5jdGlvbihkYXRhKSB7XHJcblx0TmFub1N0YXRlQ2xhc3MucHJvdG90eXBlLm9uVXBkYXRlLmNhbGwodGhpcywgZGF0YSk7XHJcblx0dmFyIHN0YXRlID0gdGhpcztcclxuXHRcclxuXHR0cnkge1xyXG5cdFx0aWYoZGF0YVsnZGF0YSddWydhcHAnXSAhPSBudWxsKSB7XHJcblx0XHRcdHZhciB0ZW1wbGF0ZSA9IGRhdGFbJ2RhdGEnXVsnYXBwJ11bJ3RlbXBsYXRlJ107XHJcblx0XHRcdGlmKHRlbXBsYXRlICE9IG51bGwgJiYgdGVtcGxhdGUgIT0gc3RhdGUuY3VycmVudF90ZW1wbGF0ZSkge1xyXG5cdFx0XHRcdCQud2hlbigkLmFqYXgoe1xyXG5cdFx0XHRcdFx0dXJsOiB0ZW1wbGF0ZSArICcudG1wbCcsXHJcblx0XHRcdFx0XHRjYWNoZTogZmFsc2UsXHJcblx0XHRcdFx0XHRkYXRhVHlwZTogJ3RleHQnXHJcblx0XHRcdFx0fSkpXHJcblx0XHRcdFx0LmRvbmUoZnVuY3Rpb24odGVtcGxhdGVNYXJrdXApIHtcclxuXHRcdFx0XHRcdHRlbXBsYXRlTWFya3VwICs9ICc8ZGl2IGNsYXNzPVwiY2xlYXJCb3RoXCI+PC9kaXY+JztcclxuXHJcblx0XHRcdFx0XHR0cnkge1xyXG5cdFx0XHRcdFx0XHROYW5vVGVtcGxhdGUuYWRkVGVtcGxhdGUoJ2FwcCcsIHRlbXBsYXRlTWFya3VwKTtcclxuXHRcdFx0XHRcdFx0TmFub1RlbXBsYXRlLnJlc2V0VGVtcGxhdGUoJ2FwcCcpO1xyXG5cdFx0XHRcdFx0XHQkKFwiI3VpQXBwXCIpLmh0bWwoTmFub1RlbXBsYXRlLnBhcnNlKCdhcHAnLCBkYXRhKSk7XHJcblx0XHRcdFx0XHRcdHN0YXRlLmN1cnJlbnRfdGVtcGxhdGUgPSB0ZW1wbGF0ZTtcclxuXHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdHN0YXRlLm9uQWZ0ZXJVcGRhdGUoZGF0YSk7XHJcblx0XHRcdFx0XHR9IGNhdGNoKGVycm9yKSB7XHJcblx0XHRcdFx0XHRcdHJlcG9ydEVycm9yKCdFUlJPUjogQW4gZXJyb3Igb2NjdXJyZWQgd2hpbGUgbG9hZGluZyB0aGUgUERBIEFwcCBVSTogJyArIGVycm9yLm1lc3NhZ2UpO1xyXG5cdFx0XHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fSlcclxuXHRcdFx0XHQuZmFpbCggZnVuY3Rpb24gKCkge1xyXG5cdFx0XHRcdFx0cmVwb3J0RXJyb3IoJ0VSUk9SOiBMb2FkaW5nIHRlbXBsYXRlIGFwcCgnICsgdGVtcGxhdGUgKyAnKSBmYWlsZWQhJyk7XHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0aWYgKE5hbm9UZW1wbGF0ZS50ZW1wbGF0ZUV4aXN0cygnYXBwJykpIHtcclxuXHRcdFx0XHRcdCQoXCIjdWlBcHBcIikuaHRtbChOYW5vVGVtcGxhdGUucGFyc2UoJ2FwcCcsIGRhdGEpKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9IGNhdGNoKGVycm9yKSB7XHJcblx0XHRyZXBvcnRFcnJvcignRVJST1I6IEFuIGVycm9yIG9jY3VycmVkIHdoaWxlIHJlbmRlcmluZyB0aGUgUERBIEFwcCBVSTogJyArIGVycm9yLm1lc3NhZ2UpO1xyXG5cdFx0cmV0dXJuO1xyXG5cdH1cclxufVxuLy8gVGhpcyBpcyB0aGUgYmFzZSBzdGF0ZSBjbGFzcywgaXQgaXMgbm90IHRvIGJlIHVzZWQgZGlyZWN0bHlcclxuXHJcbmZ1bmN0aW9uIE5hbm9TdGF0ZUNsYXNzKCkge31cclxuXHJcbk5hbm9TdGF0ZUNsYXNzLnByb3RvdHlwZS5rZXkgPSBudWxsO1xyXG5OYW5vU3RhdGVDbGFzcy5wcm90b3R5cGUubGF5b3V0UmVuZGVyZWQgPSBmYWxzZTtcclxuTmFub1N0YXRlQ2xhc3MucHJvdG90eXBlLmNvbnRlbnRSZW5kZXJlZCA9IGZhbHNlO1xyXG5OYW5vU3RhdGVDbGFzcy5wcm90b3R5cGUubWFwSW5pdGlhbGlzZWQgPSBmYWxzZTtcclxuXHJcbk5hbm9TdGF0ZUNsYXNzLnByb3RvdHlwZS5pc0N1cnJlbnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICByZXR1cm4gTmFub1N0YXRlTWFuYWdlci5nZXRDdXJyZW50U3RhdGUoKSA9PSB0aGlzO1xyXG59O1xyXG5cclxuTmFub1N0YXRlQ2xhc3MucHJvdG90eXBlLm9uQWRkID0gZnVuY3Rpb24gKHByZXZpb3VzU3RhdGUpIHtcclxuICAgIC8vIERvIG5vdCBhZGQgY29kZSBoZXJlLCBhZGQgaXQgdG8gdGhlICdkZWZhdWx0JyBzdGF0ZSAobmFub19zdGF0ZV9kZWZhdXQuanMpIG9yIGNyZWF0ZSBhIG5ldyBzdGF0ZSBhbmQgb3ZlcnJpZGUgdGhpcyBmdW5jdGlvblxyXG5cclxuICAgIE5hbm9CYXNlQ2FsbGJhY2tzLmFkZENhbGxiYWNrcygpO1xyXG4gICAgTmFub0Jhc2VIZWxwZXJzLmFkZEhlbHBlcnMoKTtcclxufTtcclxuXHJcbk5hbm9TdGF0ZUNsYXNzLnByb3RvdHlwZS5vblJlbW92ZSA9IGZ1bmN0aW9uIChuZXh0U3RhdGUpIHtcclxuICAgIC8vIERvIG5vdCBhZGQgY29kZSBoZXJlLCBhZGQgaXQgdG8gdGhlICdkZWZhdWx0JyBzdGF0ZSAobmFub19zdGF0ZV9kZWZhdXQuanMpIG9yIGNyZWF0ZSBhIG5ldyBzdGF0ZSBhbmQgb3ZlcnJpZGUgdGhpcyBmdW5jdGlvblxyXG5cclxuICAgIE5hbm9CYXNlQ2FsbGJhY2tzLnJlbW92ZUNhbGxiYWNrcygpO1xyXG4gICAgTmFub0Jhc2VIZWxwZXJzLnJlbW92ZUhlbHBlcnMoKTtcclxufTtcclxuXHJcbk5hbm9TdGF0ZUNsYXNzLnByb3RvdHlwZS5vbkJlZm9yZVVwZGF0ZSA9IGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAvLyBEbyBub3QgYWRkIGNvZGUgaGVyZSwgYWRkIGl0IHRvIHRoZSAnZGVmYXVsdCcgc3RhdGUgKG5hbm9fc3RhdGVfZGVmYXV0LmpzKSBvciBjcmVhdGUgYSBuZXcgc3RhdGUgYW5kIG92ZXJyaWRlIHRoaXMgZnVuY3Rpb25cclxuXHJcbiAgICBkYXRhID0gTmFub1N0YXRlTWFuYWdlci5leGVjdXRlQmVmb3JlVXBkYXRlQ2FsbGJhY2tzKGRhdGEpO1xyXG5cclxuICAgIHJldHVybiBkYXRhOyAvLyBSZXR1cm4gZGF0YSB0byBjb250aW51ZSwgcmV0dXJuIGZhbHNlIHRvIHByZXZlbnQgb25VcGRhdGUgYW5kIG9uQWZ0ZXJVcGRhdGVcclxufTtcclxuXHJcbk5hbm9TdGF0ZUNsYXNzLnByb3RvdHlwZS5vblVwZGF0ZSA9IGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAvLyBEbyBub3QgYWRkIGNvZGUgaGVyZSwgYWRkIGl0IHRvIHRoZSAnZGVmYXVsdCcgc3RhdGUgKG5hbm9fc3RhdGVfZGVmYXV0LmpzKSBvciBjcmVhdGUgYSBuZXcgc3RhdGUgYW5kIG92ZXJyaWRlIHRoaXMgZnVuY3Rpb25cclxuXHJcbiAgICB0cnlcclxuICAgIHtcclxuICAgICAgICBpZiAoIXRoaXMubGF5b3V0UmVuZGVyZWQgfHwgKGRhdGFbJ2NvbmZpZyddLmhhc093blByb3BlcnR5KCdhdXRvVXBkYXRlTGF5b3V0JykgJiYgZGF0YVsnY29uZmlnJ11bJ2F1dG9VcGRhdGVMYXlvdXQnXSkpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICAkKFwiI3VpTGF5b3V0XCIpLmh0bWwoTmFub1RlbXBsYXRlLnBhcnNlKCdsYXlvdXQnLCBkYXRhKSk7IC8vIHJlbmRlciB0aGUgJ21haWwnIHRlbXBsYXRlIHRvIHRoZSAjbWFpblRlbXBsYXRlIGRpdlxyXG4gICAgICAgICAgICB0aGlzLmxheW91dFJlbmRlcmVkID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCF0aGlzLmNvbnRlbnRSZW5kZXJlZCB8fCAoZGF0YVsnY29uZmlnJ10uaGFzT3duUHJvcGVydHkoJ2F1dG9VcGRhdGVDb250ZW50JykgJiYgZGF0YVsnY29uZmlnJ11bJ2F1dG9VcGRhdGVDb250ZW50J10pKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgJChcIiN1aUNvbnRlbnRcIikuaHRtbChOYW5vVGVtcGxhdGUucGFyc2UoJ21haW4nLCBkYXRhKSk7IC8vIHJlbmRlciB0aGUgJ21haWwnIHRlbXBsYXRlIHRvIHRoZSAjbWFpblRlbXBsYXRlIGRpdlxyXG4gICAgICAgICAgICB0aGlzLmNvbnRlbnRSZW5kZXJlZCA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChOYW5vVGVtcGxhdGUudGVtcGxhdGVFeGlzdHMoJ21hcENvbnRlbnQnKSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5tYXBJbml0aWFsaXNlZClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgLy8gQWRkIGRyYWcgZnVuY3Rpb25hbGl0eSB0byB0aGUgbWFwIHVpXHJcbiAgICAgICAgICAgICAgICAkKCcjdWlNYXAnKS5kcmFnZ2FibGUoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAkKCcjdWlNYXBUb29sdGlwJylcclxuICAgICAgICAgICAgICAgICAgICAub2ZmKCdjbGljaycpXHJcbiAgICAgICAgICAgICAgICAgICAgLm9uKCdjbGljaycsIGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmZhZGVPdXQoNDAwKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLm1hcEluaXRpYWxpc2VkID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgJChcIiN1aU1hcENvbnRlbnRcIikuaHRtbChOYW5vVGVtcGxhdGUucGFyc2UoJ21hcENvbnRlbnQnLCBkYXRhKSk7IC8vIHJlbmRlciB0aGUgJ21hcENvbnRlbnQnIHRlbXBsYXRlIHRvIHRoZSAjdWlNYXBDb250ZW50IGRpdlxyXG5cclxuICAgICAgICAgICAgaWYgKGRhdGFbJ2NvbmZpZyddLmhhc093blByb3BlcnR5KCdzaG93TWFwJykgJiYgZGF0YVsnY29uZmlnJ11bJ3Nob3dNYXAnXSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgJCgnI3VpQ29udGVudCcpLmFkZENsYXNzKCdoaWRkZW4nKTtcclxuICAgICAgICAgICAgICAgICQoJyN1aU1hcFdyYXBwZXInKS5yZW1vdmVDbGFzcygnaGlkZGVuJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAkKCcjdWlNYXBXcmFwcGVyJykuYWRkQ2xhc3MoJ2hpZGRlbicpO1xyXG4gICAgICAgICAgICAgICAgJCgnI3VpQ29udGVudCcpLnJlbW92ZUNsYXNzKCdoaWRkZW4nKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoTmFub1RlbXBsYXRlLnRlbXBsYXRlRXhpc3RzKCdtYXBIZWFkZXInKSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgICQoXCIjdWlNYXBIZWFkZXJcIikuaHRtbChOYW5vVGVtcGxhdGUucGFyc2UoJ21hcEhlYWRlcicsIGRhdGEpKTsgLy8gcmVuZGVyIHRoZSAnbWFwSGVhZGVyJyB0ZW1wbGF0ZSB0byB0aGUgI3VpTWFwSGVhZGVyIGRpdlxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoTmFub1RlbXBsYXRlLnRlbXBsYXRlRXhpc3RzKCdtYXBGb290ZXInKSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgICQoXCIjdWlNYXBGb290ZXJcIikuaHRtbChOYW5vVGVtcGxhdGUucGFyc2UoJ21hcEZvb3RlcicsIGRhdGEpKTsgLy8gcmVuZGVyIHRoZSAnbWFwRm9vdGVyJyB0ZW1wbGF0ZSB0byB0aGUgI3VpTWFwRm9vdGVyIGRpdlxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGNhdGNoKGVycm9yKVxyXG4gICAge1xyXG4gICAgICAgIHJlcG9ydEVycm9yKCdFUlJPUjogQW4gZXJyb3Igb2NjdXJyZWQgd2hpbGUgcmVuZGVyaW5nIHRoZSBVSTogJyArIGVycm9yLm1lc3NhZ2UpO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxufTtcclxuXHJcbk5hbm9TdGF0ZUNsYXNzLnByb3RvdHlwZS5vbkFmdGVyVXBkYXRlID0gZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgIC8vIERvIG5vdCBhZGQgY29kZSBoZXJlLCBhZGQgaXQgdG8gdGhlICdkZWZhdWx0JyBzdGF0ZSAobmFub19zdGF0ZV9kZWZhdXQuanMpIG9yIGNyZWF0ZSBhIG5ldyBzdGF0ZSBhbmQgb3ZlcnJpZGUgdGhpcyBmdW5jdGlvblxyXG5cclxuICAgIE5hbm9TdGF0ZU1hbmFnZXIuZXhlY3V0ZUFmdGVyVXBkYXRlQ2FsbGJhY2tzKGRhdGEpO1xyXG59O1xyXG5cclxuTmFub1N0YXRlQ2xhc3MucHJvdG90eXBlLmFsZXJ0VGV4dCA9IGZ1bmN0aW9uICh0ZXh0KSB7XHJcbiAgICAvLyBEbyBub3QgYWRkIGNvZGUgaGVyZSwgYWRkIGl0IHRvIHRoZSAnZGVmYXVsdCcgc3RhdGUgKG5hbm9fc3RhdGVfZGVmYXV0LmpzKSBvciBjcmVhdGUgYSBuZXcgc3RhdGUgYW5kIG92ZXJyaWRlIHRoaXMgZnVuY3Rpb25cclxuXHJcbiAgICBhbGVydCh0ZXh0KTtcclxufTtcclxuXG5cclxudmFyIE5hbm9UZW1wbGF0ZSA9IGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICB2YXIgX3RlbXBsYXRlRGF0YSA9IHt9O1xyXG5cclxuICAgIHZhciBfdGVtcGxhdGVzID0ge307XHJcbiAgICB2YXIgX2NvbXBpbGVkVGVtcGxhdGVzID0ge307XHJcbiAgICBcclxuICAgIHZhciBfaGVscGVycyA9IHt9O1xyXG5cclxuICAgIHZhciBpbml0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIC8vIFdlIHN0b3JlIHRlbXBsYXRlRGF0YSBpbiB0aGUgYm9keSB0YWcsIGl0J3MgYXMgZ29vZCBhIHBsYWNlIGFzIGFueVxyXG4gICAgICAgIF90ZW1wbGF0ZURhdGEgPSAkKCdib2R5JykuZGF0YSgndGVtcGxhdGVEYXRhJyk7XHJcblxyXG4gICAgICAgIGlmIChfdGVtcGxhdGVEYXRhID09IG51bGwpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXBvcnRFcnJvcignRXJyb3I6IFRlbXBsYXRlIGRhdGEgZGlkIG5vdCBsb2FkIGNvcnJlY3RseS4nKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxvYWROZXh0VGVtcGxhdGUoKTtcclxuICAgIH07XHJcblxyXG4gICAgdmFyIGxvYWROZXh0VGVtcGxhdGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgLy8gd2UgY291bnQgdGhlIG51bWJlciBvZiB0ZW1wbGF0ZXMgZm9yIHRoaXMgdWkgc28gdGhhdCB3ZSBrbm93IHdoZW4gdGhleSd2ZSBhbGwgYmVlbiByZW5kZXJlZFxyXG4gICAgICAgIHZhciB0ZW1wbGF0ZUNvdW50ID0gT2JqZWN0LnNpemUoX3RlbXBsYXRlRGF0YSk7XHJcblxyXG4gICAgICAgIGlmICghdGVtcGxhdGVDb3VudClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgICQoZG9jdW1lbnQpLnRyaWdnZXIoJ3RlbXBsYXRlc0xvYWRlZCcpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBsb2FkIG1hcmt1cCBmb3IgZWFjaCB0ZW1wbGF0ZSBhbmQgcmVnaXN0ZXIgaXRcclxuICAgICAgICBmb3IgKHZhciBrZXkgaW4gX3RlbXBsYXRlRGF0YSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmICghX3RlbXBsYXRlRGF0YS5oYXNPd25Qcm9wZXJ0eShrZXkpKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgJC53aGVuKCQuYWpheCh7XHJcbiAgICAgICAgICAgICAgICAgICAgdXJsOiBfdGVtcGxhdGVEYXRhW2tleV0sXHJcbiAgICAgICAgICAgICAgICAgICAgY2FjaGU6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGFUeXBlOiAndGV4dCdcclxuICAgICAgICAgICAgICAgIH0pKVxyXG4gICAgICAgICAgICAgICAgLmRvbmUoIGZ1bmN0aW9uKHRlbXBsYXRlTWFya3VwKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlTWFya3VwICs9ICc8ZGl2IGNsYXNzPVwiY2xlYXJCb3RoXCI+PC9kaXY+JztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgTmFub1RlbXBsYXRlLmFkZFRlbXBsYXRlKGtleSwgdGVtcGxhdGVNYXJrdXApO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBjYXRjaChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXBvcnRFcnJvcignRVJST1I6IEFuIGVycm9yIG9jY3VycmVkIHdoaWxlIGxvYWRpbmcgdGhlIFVJOiAnICsgZXJyb3IubWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBfdGVtcGxhdGVEYXRhW2tleV07XHJcbiAgICAgICAgICAgICAgICAgICAgbG9hZE5leHRUZW1wbGF0ZSgpO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIC5mYWlsKCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVwb3J0RXJyb3IoJ0VSUk9SOiBMb2FkaW5nIHRlbXBsYXRlICcgKyBrZXkgKyAnKCcgKyBfdGVtcGxhdGVEYXRhW2tleV0gKyAnKSBmYWlsZWQhJyk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIHZhciBjb21waWxlVGVtcGxhdGVzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGZvciAodmFyIGtleSBpbiBfdGVtcGxhdGVzKSB7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICBfY29tcGlsZWRUZW1wbGF0ZXNba2V5XSA9IGRvVC50ZW1wbGF0ZShfdGVtcGxhdGVzW2tleV0sIG51bGwsIF90ZW1wbGF0ZXMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgcmVwb3J0RXJyb3IoZXJyb3IubWVzc2FnZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgaW5pdDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpbml0KCk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBhZGRUZW1wbGF0ZTogZnVuY3Rpb24gKGtleSwgdGVtcGxhdGVTdHJpbmcpIHtcclxuICAgICAgICAgICAgX3RlbXBsYXRlc1trZXldID0gdGVtcGxhdGVTdHJpbmc7XHJcbiAgICAgICAgfSxcclxuICAgICAgICB0ZW1wbGF0ZUV4aXN0czogZnVuY3Rpb24gKGtleSkge1xyXG4gICAgICAgICAgICByZXR1cm4gX3RlbXBsYXRlcy5oYXNPd25Qcm9wZXJ0eShrZXkpO1xyXG4gICAgICAgIH0sXHJcblx0XHRyZXNldFRlbXBsYXRlOiBmdW5jdGlvbiAoa2V5KSB7XHJcblx0XHRcdF9jb21waWxlZFRlbXBsYXRlc1trZXldID0gbnVsbDtcclxuXHRcdH0sXHJcbiAgICAgICAgcGFyc2U6IGZ1bmN0aW9uICh0ZW1wbGF0ZUtleSwgZGF0YSkge1xyXG4gICAgICAgICAgICBpZiAoIV9jb21waWxlZFRlbXBsYXRlcy5oYXNPd25Qcm9wZXJ0eSh0ZW1wbGF0ZUtleSkgfHwgIV9jb21waWxlZFRlbXBsYXRlc1t0ZW1wbGF0ZUtleV0pIHtcclxuICAgICAgICAgICAgICAgIGlmICghX3RlbXBsYXRlcy5oYXNPd25Qcm9wZXJ0eSh0ZW1wbGF0ZUtleSkpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXBvcnRFcnJvcignRVJST1I6IFRlbXBsYXRlIFwiJyArIHRlbXBsYXRlS2V5ICsgJ1wiIGRvZXMgbm90IGV4aXN0IGluIF9jb21waWxlZFRlbXBsYXRlcyEnKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJzxoMj5UZW1wbGF0ZSBlcnJvciAoZG9lcyBub3QgZXhpc3QpPC9oMj4nO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY29tcGlsZVRlbXBsYXRlcygpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgX2NvbXBpbGVkVGVtcGxhdGVzW3RlbXBsYXRlS2V5XSAhPSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgICAgICByZXBvcnRFcnJvcihfY29tcGlsZWRUZW1wbGF0ZXNbdGVtcGxhdGVLZXldKTtcclxuICAgICAgICAgICAgICAgIHJlcG9ydEVycm9yKCdFUlJPUjogVGVtcGxhdGUgXCInICsgdGVtcGxhdGVLZXkgKyAnXCIgZmFpbGVkIHRvIGNvbXBpbGUhJyk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gJzxoMj5UZW1wbGF0ZSBlcnJvciAoZmFpbGVkIHRvIGNvbXBpbGUpPC9oMj4nO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBfY29tcGlsZWRUZW1wbGF0ZXNbdGVtcGxhdGVLZXldLmNhbGwodGhpcywgZGF0YVsnZGF0YSddLCBkYXRhWydjb25maWcnXSwgX2hlbHBlcnMpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgYWRkSGVscGVyOiBmdW5jdGlvbiAoaGVscGVyTmFtZSwgaGVscGVyRnVuY3Rpb24pIHtcclxuICAgICAgICAgICAgaWYgKCFqUXVlcnkuaXNGdW5jdGlvbihoZWxwZXJGdW5jdGlvbikpIHtcclxuICAgICAgICAgICAgICAgIHJlcG9ydEVycm9yKCdOYW5vVGVtcGxhdGUuYWRkSGVscGVyIGZhaWxlZCB0byBhZGQgJyArIGhlbHBlck5hbWUgKyAnIGFzIGl0IGlzIG5vdCBhIGZ1bmN0aW9uLicpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuOyBcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgX2hlbHBlcnNbaGVscGVyTmFtZV0gPSBoZWxwZXJGdW5jdGlvbjtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGFkZEhlbHBlcnM6IGZ1bmN0aW9uIChoZWxwZXJzKSB7ICAgICAgICBcclxuICAgICAgICAgICAgZm9yICh2YXIgaGVscGVyTmFtZSBpbiBoZWxwZXJzKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWhlbHBlcnMuaGFzT3duUHJvcGVydHkoaGVscGVyTmFtZSkpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBOYW5vVGVtcGxhdGUuYWRkSGVscGVyKGhlbHBlck5hbWUsIGhlbHBlcnNbaGVscGVyTmFtZV0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICByZW1vdmVIZWxwZXI6IGZ1bmN0aW9uIChoZWxwZXJOYW1lKSB7XHJcbiAgICAgICAgICAgIGlmIChoZWxwZXJzLmhhc093blByb3BlcnR5KGhlbHBlck5hbWUpKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBkZWxldGUgX2hlbHBlcnNbaGVscGVyTmFtZV07XHJcbiAgICAgICAgICAgIH0gICBcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG59KCk7XHJcblxuTmFub1RyYW5zaXRpb24gPSBmdW5jdGlvbigpIHtcclxuXHR2YXIgaWRDYWNoZSA9IHt9O1xyXG5cdHZhciBzdGF0ZUNhY2hlID0ge307XHJcblx0dmFyIGN1cnJlbnRJRCA9IDA7XHJcblxyXG5cdE5hbm9TdGF0ZU1hbmFnZXIuYWRkQmVmb3JlVXBkYXRlQ2FsbGJhY2soXCJUcmFuc2l0aW9uUmVzZXRcIiwgZnVuY3Rpb24odXBkYXRlRGF0YSkge1xyXG5cdFx0Y3VycmVudElEID0gMDtcclxuXHRcdHJldHVybiB1cGRhdGVEYXRhO1xyXG5cdH0pO1xyXG5cclxuXHQvLyBnZXQgYSB0cmFuc2l0aW9uIGhhbmRsZSwgYWRkIHRoaXMgdG8geW91ciBlbGVtZW50J3MgY2xhc3NcclxuXHR2YXIgX2FsbG9jSUQgPSBmdW5jdGlvbih1bmlxdWVJRCkge1xyXG5cdFx0aWYodW5pcXVlSUQgPT0gXCJfSGlkZV9NYXBfY2xvc2VcIikgLy8gaGFjayBiZWNhdXNlIG5hbm8gZG9lcyB3ZWlyZCB0aGluZyBvbiBmaXJzdCB0aWNrXHJcblx0XHRcdHJldHVybiBcInRyYW5zaXRpb25fX21hcFwiO1xyXG5cclxuXHRcdGlmKHVuaXF1ZUlEID09PSB1bmRlZmluZWQpXHJcblx0XHRcdHVuaXF1ZUlEID0gXCJcIjtcclxuXHRcdHJldHVybiBcInRyYW5zaXRpb25fX1wiICsgKGN1cnJlbnRJRCsrKSArIFwiX1wiICsgdW5pcXVlSUQudG9TdHJpbmcoKTtcclxuXHR9XHJcblxyXG5cdC8vIHNldHVwIHRyYW5zaXRpb25zLCBjYWxsIHRoaXMgZXhhY3RseSBvbmNlIGEgcmVmcmVzaCwgcmV0dXJucyBvbGQgc3RhdGVcclxuXHR2YXIgX3VwZGF0ZUVsZW1lbnQgPSBmdW5jdGlvbihpZCwgbmV3U3RhdGUsIG1lcmdlKSB7XHJcblx0XHR2YXIgY2FjaGUgPSBpZENhY2hlW2lkXTtcclxuXHRcdHZhciBvbGRTdGF0ZTtcclxuXHJcblx0XHRpZihtZXJnZSA9PT0gdW5kZWZpbmVkKVxyXG5cdFx0XHRtZXJnZSA9IGZhbHNlO1xyXG5cclxuXHRcdHZhciBlbGVtZW50ID0gJChcIi5cIiArIGlkKTtcclxuXHRcdGlmKGVsZW1lbnQubGVuZ3RoID09IDApXHJcblx0XHRcdHJldHVybiBuZXdTdGF0ZTtcclxuXHJcblx0XHQvLyB2ZXJpZnkgdGhhdCB0aGUgaWQgc3RpbGwgcG9pbnRzIHRvIHRoZSBzYW1lIHRoaW5nXHJcblx0XHQvLyBhbmQgZ2V0IG9sZCBzdGF0ZVxyXG5cdFx0ZWxlbWVudCA9IGVsZW1lbnRbMF07XHJcblx0XHRpZihjYWNoZVxyXG5cdFx0XHQmJiBjYWNoZS50YWdOYW1lID09IGVsZW1lbnQudGFnTmFtZVxyXG5cdFx0XHQmJiBjYWNoZS50YWJJbmRleCA9PSBlbGVtZW50LnRhYkluZGV4XHJcblx0XHRcdCYmIGNhY2hlLnBhcmVudCA9PSBlbGVtZW50LnBhcmVudE5vZGUudGFnTmFtZVxyXG5cdFx0XHQmJiBjYWNoZS5jaGlsZHJlbiA9PSBlbGVtZW50LmNoaWxkcmVuLmxlbmd0aCkge1xyXG5cclxuXHRcdFx0Ly8geWVwLCB0aGlzIGlzIGNvbnRpbnVhdGlvbiBvZiBvbGQgb2JqZWN0XHJcblx0XHRcdG9sZFN0YXRlID0gc3RhdGVDYWNoZVtpZF07XHJcblxyXG5cdFx0XHRpZihtZXJnZSkge1xyXG5cdFx0XHRcdHZhciBuZXdTdGF0ZUNvcHkgPSB7fTtcclxuXHRcdFx0XHRmb3IoayBpbiBvbGRTdGF0ZSlcclxuXHRcdFx0XHRcdG5ld1N0YXRlQ29weVtrXSA9IG9sZFN0YXRlW2tdO1xyXG5cdFx0XHRcdGZvcihrIGluIG5ld1N0YXRlKVxyXG5cdFx0XHRcdFx0bmV3U3RhdGVDb3B5W2tdID0gbmV3U3RhdGVba107XHJcblx0XHRcdFx0bmV3U3RhdGUgPSBuZXdTdGF0ZUNvcHk7XHJcblx0XHRcdH1cclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdC8vIG5vcCFcclxuXHRcdFx0b2xkU3RhdGUgPSBuZXdTdGF0ZTtcclxuXHJcblx0XHRcdGlkQ2FjaGVbaWRdID0ge1xyXG5cdFx0XHRcdHRhZ05hbWU6IGVsZW1lbnQudGFnTmFtZSxcclxuXHRcdFx0XHR0YWJJbmRleDogZWxlbWVudC50YWJJbmRleCxcclxuXHRcdFx0XHRwYXJlbnQ6IGVsZW1lbnQucGFyZW50Tm9kZS50YWdOYW1lLFxyXG5cdFx0XHRcdGNoaWxkcmVuOiBlbGVtZW50LmNoaWxkcmVuLmxlbmd0aFxyXG5cdFx0XHR9O1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIHNhdmUgbmV3IHN0YXRlIGZvciBuZXh0IGN5Y2xlXHJcblx0XHRzdGF0ZUNhY2hlW2lkXSA9IG5ld1N0YXRlO1xyXG5cdFx0cmV0dXJuIG9sZFN0YXRlO1xyXG5cdH1cclxuXHJcblx0dmFyIF9yZXNvbHZlVGFyZ2V0ID0gZnVuY3Rpb24oaWQsIGZpbHRlcikge1xyXG5cdFx0dmFyIGVsZW1lbnQgPSAkKFwiLlwiICsgaWQpO1xyXG5cclxuXHRcdHJldHVybiBmaWx0ZXIgPyAkKGVsZW1lbnQpLmNoaWxkcmVuKGZpbHRlcikgOiAkKGVsZW1lbnQpO1xyXG5cdH1cclxuXHJcblx0Ly8gYW5pbWF0ZSBhIHN0YXRlIGNoYW5nZVxyXG5cdHZhciBfYW5pbWF0ZUVsZW1lbnQgPSBmdW5jdGlvbihpZCwgZmlsdGVyLCBvbGRTdGF0ZSwgbmV3U3RhdGUsIHRpbWUpIHtcclxuXHRcdHZhciB0YXJnZXQgPSBfcmVzb2x2ZVRhcmdldChpZCwgZmlsdGVyKTtcclxuXHJcblx0XHRpZih0aW1lID09PSB1bmRlZmluZWQpXHJcblx0XHRcdHRpbWUgPSAxOTAwO1xyXG5cclxuXHRcdC8vICBkbyB0aGUgYW5pbWF0aW9uXHJcblx0XHR0YXJnZXRcclxuXHRcdFx0LmNzcyhvbGRTdGF0ZSlcclxuXHRcdFx0LmFuaW1hdGUobmV3U3RhdGUsIHtcclxuXHRcdFx0XHRkdXJhdGlvbjogdGltZSxcclxuXHRcdFx0XHRxdWV1ZTogZmFsc2VcclxuXHRcdFx0fSk7XHJcblxyXG5cdFx0Ly8gbWF5YmUgY2xhc3MgdG9vP1xyXG5cdFx0dmFyIG9sZENsYXNzID0gb2xkU3RhdGVbXCIuLmNsYXNzXCJdO1xyXG5cdFx0dmFyIG5ld0NsYXNzID0gbmV3U3RhdGVbXCIuLmNsYXNzXCJdO1xyXG5cdFx0aWYob2xkQ2xhc3MgJiYgbmV3Q2xhc3MpIHtcclxuXHRcdFx0dGFyZ2V0LmFkZENsYXNzKG9sZENsYXNzKTtcclxuXHRcdFx0aWYob2xkQ2xhc3MgIT0gbmV3Q2xhc3MpIHtcclxuXHRcdFx0XHQvLyBzdHJpcCBjbGFzc2VzIHRoYXQgYXJlIGluIGJvdGhcclxuXHRcdFx0XHR2YXIgb2xkQ2xhc3MgPSBvbGRDbGFzcy5zcGxpdChcIiBcIik7XHJcblx0XHRcdFx0dmFyIG5ld0NsYXNzID0gbmV3Q2xhc3Muc3BsaXQoXCIgXCIpO1xyXG5cclxuXHRcdFx0XHR2YXIgZmlsdGVyZWRPbGRDbGFzcyA9IG9sZENsYXNzLmZpbHRlcihmdW5jdGlvbih4KSB7IHJldHVybiBuZXdDbGFzcy5pbmRleE9mKHgpID09IC0xOyB9KTtcclxuXHRcdFx0XHR2YXIgZmlsdGVyZWROZXdDbGFzcyA9IG5ld0NsYXNzLmZpbHRlcihmdW5jdGlvbih4KSB7IHJldHVybiBvbGRDbGFzcy5pbmRleE9mKHgpID09IC0xOyB9KTtcclxuXHJcblx0XHRcdFx0b2xkQ2xhc3MgPSBmaWx0ZXJlZE9sZENsYXNzLmpvaW4oXCIgXCIpO1xyXG5cdFx0XHRcdG5ld0NsYXNzID0gZmlsdGVyZWROZXdDbGFzcy5qb2luKFwiIFwiKTtcclxuXHJcblx0XHRcdFx0dGFyZ2V0LnN3aXRjaENsYXNzKG9sZENsYXNzLCBuZXdDbGFzcywge1xyXG5cdFx0XHRcdFx0ZHVyYXRpb246IHRpbWUsXHJcblx0XHRcdFx0XHRxdWV1ZTogZmFsc2VcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0dmFyIF9hbmltYXRlVGV4dFZhbHVlID0gZnVuY3Rpb24oaWQsIGZpbHRlciwgcGxhY2VzLCBvbGRWYWx1ZSwgbmV3VmFsdWUsIHRpbWUpIHtcclxuXHRcdHZhciB0YXJnZXQgPSBfcmVzb2x2ZVRhcmdldChpZCwgZmlsdGVyKTtcclxuXHJcblx0XHRpZih0aW1lID09PSB1bmRlZmluZWQpXHJcblx0XHRcdHRpbWUgPSAxOTAwO1xyXG5cclxuXHRcdGlmKHBsYWNlcyA9PSAtMSlcclxuXHRcdFx0dGFyZ2V0LnRleHQob2xkVmFsdWUudG9TdHJpbmcoKSk7Ly9vbGRWYWx1ZS50b1N0cmluZygpKTtcclxuXHRcdGVsc2VcclxuXHRcdFx0dGFyZ2V0LnRleHQob2xkVmFsdWUudG9GaXhlZChwbGFjZXMpKTsvL29sZFZhbHVlLnRvRml4ZWQocGxhY2VzKSk7XHJcblxyXG5cdFx0aWYob2xkVmFsdWUgIT0gbmV3VmFsdWUpXHJcblx0XHRcdHRhcmdldC5hbmltYXRlKHtpOiAxfSwge1xyXG5cdFx0XHRcdGR1cmF0aW9uOiB0aW1lLFxyXG5cdFx0XHRcdHF1ZXVlOiBmYWxzZSxcclxuXHRcdFx0XHRzdGVwOiBmdW5jdGlvbihub3csIGZ4KSB7XHJcblx0XHRcdFx0XHRpZihwbGFjZXMgPT0gLTEpIHtcclxuXHRcdFx0XHRcdFx0ZnguZWxlbS50ZXh0Q29udGVudCA9IChvbGRWYWx1ZSAqICgxIC0gbm93KSArIG5ld1ZhbHVlICogbm93KS50b1N0cmluZygpO1xyXG5cdFx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdFx0ZnguZWxlbS50ZXh0Q29udGVudCA9IChvbGRWYWx1ZSAqICgxIC0gbm93KSArIG5ld1ZhbHVlICogbm93KS50b0ZpeGVkKHBsYWNlcyk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KTtcclxuXHR9XHJcblxyXG5cdHZhciBfYW5pbWF0ZUhvdmVyID0gZnVuY3Rpb24oaWQsIGZpbHRlciwgb2xkU3RhdGUsIG5ld1N0YXRlLCB0aW1lKSB7XHJcblx0XHR2YXIgdGFyZ2V0ID0gX3Jlc29sdmVUYXJnZXQoaWQsIGZpbHRlcik7XHJcblxyXG5cdFx0aWYodGltZSA9PT0gdW5kZWZpbmVkKVxyXG5cdFx0XHR0aW1lID0gMjAwO1xyXG5cclxuXHRcdGlmKG9sZFN0YXRlW1wiLi5ob3ZlclwiXSlcclxuXHRcdFx0dGFyZ2V0LmFkZENsYXNzKFwiaG92ZXJcIik7XHJcblxyXG5cdFx0dGFyZ2V0LmhvdmVyKFxyXG5cdFx0XHRmdW5jdGlvbigpIHtcclxuXHRcdFx0XHR0YXJnZXQuc3RvcCgxLCAxKS5hZGRDbGFzcyhcImhvdmVyXCIsIHtcclxuXHRcdFx0XHRcdGR1cmF0aW9uOiB0aW1lLFxyXG5cdFx0XHRcdFx0cXVldWU6IGZhbHNlXHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdFx0X3VwZGF0ZUVsZW1lbnQoaWQsIHtcIi4uaG92ZXJcIjogdHJ1ZX0sIHRydWUpO1xyXG5cdFx0XHR9LFxyXG5cdFx0XHRmdW5jdGlvbigpIHtcclxuXHRcdFx0XHR0YXJnZXQuc3RvcCgxLCAxKS5yZW1vdmVDbGFzcyhcImhvdmVyXCIsIHtcclxuXHRcdFx0XHRcdGR1cmF0aW9uOiB0aW1lLFxyXG5cdFx0XHRcdFx0cXVldWU6IGZhbHNlXHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdFx0X3VwZGF0ZUVsZW1lbnQoaWQsIHtcIi4uaG92ZXJcIjogZmFsc2V9LCB0cnVlKTtcclxuXHRcdFx0fVxyXG5cdFx0KTtcclxuXHR9XHJcblxyXG5cdC8vIGhlbHBlciBmb3IgbW9zdCBjb21tb24gdXNlXHJcblx0dmFyIF90cmFuc2l0aW9uRWxlbWVudCA9IGZ1bmN0aW9uKGlkLCBmaWx0ZXIsIHN0YXRlLCB0aW1lKSB7XHJcblx0XHR2YXIgb2xkID0gX3VwZGF0ZUVsZW1lbnQoaWQsIHN0YXRlKTtcclxuXHRcdF9hbmltYXRlRWxlbWVudChpZCwgZmlsdGVyLCBvbGQsIHN0YXRlLCB0aW1lKTtcclxuXHRcdHJldHVybiBvbGQ7XHJcblx0fVxyXG5cclxuXHRyZXR1cm4ge1xyXG5cdFx0YWxsb2NJRDogX2FsbG9jSUQsXHJcblx0XHR1cGRhdGVFbGVtZW50OiBfdXBkYXRlRWxlbWVudCxcclxuXHRcdGFuaW1hdGVFbGVtZW50OiBfYW5pbWF0ZUVsZW1lbnQsXHJcblx0XHRhbmltYXRlVGV4dFZhbHVlOiBfYW5pbWF0ZVRleHRWYWx1ZSxcclxuXHRcdGFuaW1hdGVIb3ZlcjogX2FuaW1hdGVIb3ZlcixcclxuXHRcdHRyYW5zaXRpb25FbGVtZW50OiBfdHJhbnNpdGlvbkVsZW1lbnRcclxuXHR9O1xyXG59KCk7XHJcblxudmFyIE5hbm9XaW5kb3cgPSBmdW5jdGlvbiAoKSBcclxue1xyXG4gICAgdmFyIHNldFBvcyA9IGZ1bmN0aW9uICh4LCB5KSB7XHJcbiAgICAgICAgTmFub1V0aWxpdHkud2luc2V0KFwicG9zXCIsIHggKyBcIixcIiArIHkpO1xyXG4gICAgfTtcclxuICAgIHZhciBzZXRTaXplID0gZnVuY3Rpb24gKHcsIGgpIHtcclxuICAgICAgIE5hbm9VdGlsaXR5LndpbnNldChcInNpemVcIiwgdyArIFwiLFwiICsgaCk7XHJcbiAgICB9O1xyXG5cclxuICAgIHZhciBpbml0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmKE5hbm9TdGF0ZU1hbmFnZXIuZ2V0RGF0YSgpLmNvbmZpZy51c2VyLmZhbmN5KSB7XHJcbiAgICAgICAgICAgIGZhbmN5Q2hyb21lKCk7XHJcbiAgICAgICAgICAgIGF0dGFjaEJ1dHRvbnMoKTtcclxuICAgICAgICAgICAgYXR0YWNoRHJhZ0FuZFJlc2l6ZSgpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICB2YXIgZmFuY3lDaHJvbWUgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICBOYW5vVXRpbGl0eS53aW5zZXQoXCJ0aXRsZWJhclwiLCAwKTtcclxuICAgICAgICBOYW5vVXRpbGl0eS53aW5zZXQoXCJjYW4tcmVzaXplXCIsIDApO1xyXG4gICAgICAgICQoJy5mYW5jeScpLnNob3coKTtcclxuICAgICAgICAkKCcjdWlUaXRsZUZsdWZmJykuY3NzKFwicmlnaHRcIiwgXCI2NXB4XCIpO1xyXG4gICAgfTtcclxuICAgIHZhciBhdHRhY2hCdXR0b25zID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgdmFyIGNsb3NlID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBOYW5vVXRpbGl0eS5jbG9zZSgpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgdmFyIG1pbmltaXplID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBOYW5vVXRpbGl0eS53aW5zZXQoXCJpcy1taW5pbWl6ZWRcIiwgXCJ0cnVlXCIpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgJChcIi5jbG9zZVwiKS5vbihcImNsaWNrXCIsIGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICBjbG9zZSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgICQoXCIubWluaW1pemVcIikub24oXCJjbGlja1wiLCBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgbWluaW1pemUoKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICB2YXIgYXR0YWNoRHJhZ0FuZFJlc2l6ZSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICQoZG9jdW1lbnQpLm9uKFwibW91c2Vtb3ZlXCIsIGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICBkcmFnKCk7XHJcbiAgICAgICAgICAgIHJlc2l6ZSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgICQoZG9jdW1lbnQpLm9uKFwibW91c2V1cFwiLCBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgaWYoZHJhZ2dpbmcpIHtcclxuICAgICAgICAgICAgICAgIGRyYWdnaW5nID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB4RHJhZyA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICB5RHJhZyA9IG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYocmVzaXppbmcpIHtcclxuICAgICAgICAgICAgICAgIHJlc2l6aW5nID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB4UmVzaXplID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIHlSZXNpemUgPSBudWxsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgJChcIiN1aVRpdGxlV3JhcHBlclwiKS5vbihcIm1vdXNlZG93blwiLCBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgZHJhZ2dpbmcgPSB0cnVlO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgICQoXCIjcmVzaXplXCIpLm9uKFwibW91c2Vkb3duXCIsIGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICByZXNpemluZyA9IHRydWU7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgdmFyIGRyYWdnaW5nLCB4RHJhZywgeURyYWc7XHJcbiAgICB2YXIgZHJhZyA9IGZ1bmN0aW9uKGV2ZW50KSB7XHJcbiAgICAgICAgdmFyIHgsIHk7XHJcbiAgICAgICAgaWYgKGV2ZW50ID09IG51bGwpIHtcclxuICAgICAgICAgICAgZXZlbnQgPSB3aW5kb3cuZXZlbnQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoIWRyYWdnaW5nKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh4RHJhZyA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHhEcmFnID0gZXZlbnQuc2NyZWVuWDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh5RHJhZyA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHlEcmFnID0gZXZlbnQuc2NyZWVuWTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHggPSAoZXZlbnQuc2NyZWVuWCAtIHhEcmFnKSArICh3aW5kb3cuc2NyZWVuTGVmdCk7XHJcbiAgICAgICAgeSA9IChldmVudC5zY3JlZW5ZIC0geURyYWcpICsgKHdpbmRvdy5zY3JlZW5Ub3ApO1xyXG5cclxuICAgICAgICBzZXRQb3MoeCwgeSk7XHJcbiAgICAgICAgeERyYWcgPSBldmVudC5zY3JlZW5YO1xyXG4gICAgICAgIHlEcmFnID0gZXZlbnQuc2NyZWVuWTtcclxuICAgIH07XHJcbiAgICB2YXIgcmVzaXppbmcsIHhSZXNpemUsIHlSZXNpemU7XHJcbiAgICB2YXIgcmVzaXplID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgdmFyIHgsIHk7XHJcbiAgICAgICAgaWYgKGV2ZW50ID09IG51bGwpIHtcclxuICAgICAgICAgICAgZXZlbnQgPSB3aW5kb3cuZXZlbnQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoIXJlc2l6aW5nKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh4UmVzaXplID09IG51bGwpIHtcclxuICAgICAgICAgICAgeFJlc2l6ZSA9IGV2ZW50LnNjcmVlblg7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoeVJlc2l6ZSA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHlSZXNpemUgPSBldmVudC5zY3JlZW5ZO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgeCA9IE1hdGgubWF4KDE1MCwgKGV2ZW50LnNjcmVlblggLSB4UmVzaXplKSArIHdpbmRvdy5pbm5lcldpZHRoKTtcclxuICAgICAgICB5ID0gTWF0aC5tYXgoMTUwLCAoZXZlbnQuc2NyZWVuWSAtIHlSZXNpemUpICsgd2luZG93LmlubmVySGVpZ2h0KTtcclxuICAgICAgICBzZXRTaXplKHgsIHkpO1xyXG4gICAgICAgIHhSZXNpemUgPSBldmVudC5zY3JlZW5YO1xyXG4gICAgICAgIHlSZXNpemUgPSBldmVudC5zY3JlZW5ZO1xyXG4gICAgfTtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgaW5pdDogZnVuY3Rpb24gKCkgeyAvL2NyYXp5IGJ1dCBlbnN1cmVzIGNvcnJlY3QgbG9hZCBvcmRlciAobmFub3V0aWwgLSBuYW5vdGVtcGxhdGUgLSBuYW5vd2luZG93KVxyXG4gICAgICAgICAgICAkKGRvY3VtZW50KS5vbigndGVtcGxhdGVzTG9hZGVkJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgaW5pdCgpO1xyXG4gICAgICAgICAgICB9KTsgXHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxufSgpOyJdfQ==
